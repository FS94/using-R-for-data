<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 R - Dealing with data | Usefulness of R for managing data</title>
  <meta name="description" content="<p>This is a minimal example of using the bookdown package to write a book.
set in the _output.yml file.
The HTML output format for this example is bookdown::gitbook,</p>" />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 R - Dealing with data | Usefulness of R for managing data" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>This is a minimal example of using the bookdown package to write a book.
set in the _output.yml file.
The HTML output format for this example is bookdown::gitbook,</p>" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 R - Dealing with data | Usefulness of R for managing data" />
  
  <meta name="twitter:description" content="<p>This is a minimal example of using the bookdown package to write a book.
set in the _output.yml file.
The HTML output format for this example is bookdown::gitbook,</p>" />
  

<meta name="author" content="Fábio A. Silva" />


<meta name="date" content="2022-06-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="basic-r.html"/>
<link rel="next" href="exploratory-data-analysis-eda.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="basic-r.html"><a href="basic-r.html"><i class="fa fa-check"></i><b>2</b> Basic R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="basic-r.html"><a href="basic-r.html#note"><i class="fa fa-check"></i><b>2.1</b> Note</a></li>
<li class="chapter" data-level="2.2" data-path="basic-r.html"><a href="basic-r.html#what-is-r-and-rstudio"><i class="fa fa-check"></i><b>2.2</b> What is R and RStudio</a></li>
<li class="chapter" data-level="2.3" data-path="basic-r.html"><a href="basic-r.html#why-r"><i class="fa fa-check"></i><b>2.3</b> Why R?</a></li>
<li class="chapter" data-level="2.4" data-path="basic-r.html"><a href="basic-r.html#where-to-get-it-and-how-to-run-it"><i class="fa fa-check"></i><b>2.4</b> Where to get it and how to run it</a></li>
<li class="chapter" data-level="2.5" data-path="basic-r.html"><a href="basic-r.html#environment"><i class="fa fa-check"></i><b>2.5</b> Environment</a></li>
<li class="chapter" data-level="2.6" data-path="basic-r.html"><a href="basic-r.html#scripts-notebooks-and-rmarkdown"><i class="fa fa-check"></i><b>2.6</b> Scripts, Notebooks and RMarkdown</a></li>
<li class="chapter" data-level="2.7" data-path="basic-r.html"><a href="basic-r.html#working-directories"><i class="fa fa-check"></i><b>2.7</b> Working directories</a></li>
<li class="chapter" data-level="2.8" data-path="basic-r.html"><a href="basic-r.html#operators"><i class="fa fa-check"></i><b>2.8</b> Operators</a></li>
<li class="chapter" data-level="2.9" data-path="basic-r.html"><a href="basic-r.html#classes-types-and-structures"><i class="fa fa-check"></i><b>2.9</b> Classes, Types and Structures</a></li>
<li class="chapter" data-level="2.10" data-path="basic-r.html"><a href="basic-r.html#comments"><i class="fa fa-check"></i><b>2.10</b> Comments</a></li>
<li class="chapter" data-level="2.11" data-path="basic-r.html"><a href="basic-r.html#objects"><i class="fa fa-check"></i><b>2.11</b> Objects</a></li>
<li class="chapter" data-level="2.12" data-path="basic-r.html"><a href="basic-r.html#combinations"><i class="fa fa-check"></i><b>2.12</b> Combinations</a></li>
<li class="chapter" data-level="2.13" data-path="basic-r.html"><a href="basic-r.html#subsetting"><i class="fa fa-check"></i><b>2.13</b> Subsetting</a></li>
<li class="chapter" data-level="2.14" data-path="basic-r.html"><a href="basic-r.html#ifs-and-whiles"><i class="fa fa-check"></i><b>2.14</b> Ifs and Whiles</a></li>
<li class="chapter" data-level="2.15" data-path="basic-r.html"><a href="basic-r.html#functions"><i class="fa fa-check"></i><b>2.15</b> Functions</a></li>
<li class="chapter" data-level="2.16" data-path="basic-r.html"><a href="basic-r.html#packages"><i class="fa fa-check"></i><b>2.16</b> Packages</a></li>
<li class="chapter" data-level="2.17" data-path="basic-r.html"><a href="basic-r.html#shortcuts"><i class="fa fa-check"></i><b>2.17</b> Shortcuts</a></li>
<li class="chapter" data-level="2.18" data-path="basic-r.html"><a href="basic-r.html#chunk-settings"><i class="fa fa-check"></i><b>2.18</b> Chunk settings</a></li>
<li class="chapter" data-level="2.19" data-path="basic-r.html"><a href="basic-r.html#code-completion"><i class="fa fa-check"></i><b>2.19</b> Code completion</a></li>
<li class="chapter" data-level="2.20" data-path="basic-r.html"><a href="basic-r.html#other-useful-features"><i class="fa fa-check"></i><b>2.20</b> Other useful features</a></li>
<li class="chapter" data-level="2.21" data-path="basic-r.html"><a href="basic-r.html#getting-help"><i class="fa fa-check"></i><b>2.21</b> Getting help</a></li>
<li class="chapter" data-level="2.22" data-path="basic-r.html"><a href="basic-r.html#further-reading"><i class="fa fa-check"></i><b>2.22</b> Further reading</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="r---dealing-with-data.html"><a href="r---dealing-with-data.html"><i class="fa fa-check"></i><b>3</b> R - Dealing with data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="r---dealing-with-data.html"><a href="r---dealing-with-data.html#opening-files"><i class="fa fa-check"></i><b>3.1</b> Opening files</a></li>
<li class="chapter" data-level="3.2" data-path="r---dealing-with-data.html"><a href="r---dealing-with-data.html#opening-multiple-files"><i class="fa fa-check"></i><b>3.2</b> Opening multiple files</a></li>
<li class="chapter" data-level="3.3" data-path="r---dealing-with-data.html"><a href="r---dealing-with-data.html#merging"><i class="fa fa-check"></i><b>3.3</b> Merging</a></li>
<li class="chapter" data-level="3.4" data-path="r---dealing-with-data.html"><a href="r---dealing-with-data.html#exporting"><i class="fa fa-check"></i><b>3.4</b> Exporting</a></li>
<li class="chapter" data-level="3.5" data-path="r---dealing-with-data.html"><a href="r---dealing-with-data.html#special-cases-in-r"><i class="fa fa-check"></i><b>3.5</b> Special cases in R</a></li>
<li class="chapter" data-level="3.6" data-path="r---dealing-with-data.html"><a href="r---dealing-with-data.html#manipulating-the-data-in-dataframes"><i class="fa fa-check"></i><b>3.6</b> Manipulating the data in dataframes</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="r---dealing-with-data.html"><a href="r---dealing-with-data.html#subsetting-a-dataframe"><i class="fa fa-check"></i><b>3.6.1</b> Subsetting a dataframe</a></li>
<li class="chapter" data-level="3.6.2" data-path="r---dealing-with-data.html"><a href="r---dealing-with-data.html#columns"><i class="fa fa-check"></i><b>3.6.2</b> Columns</a></li>
<li class="chapter" data-level="3.6.3" data-path="r---dealing-with-data.html"><a href="r---dealing-with-data.html#rows"><i class="fa fa-check"></i><b>3.6.3</b> Rows</a></li>
<li class="chapter" data-level="3.6.4" data-path="r---dealing-with-data.html"><a href="r---dealing-with-data.html#tidyverse-pipes"><i class="fa fa-check"></i><b>3.6.4</b> Tidyverse &amp; Pipes</a></li>
<li class="chapter" data-level="3.6.5" data-path="r---dealing-with-data.html"><a href="r---dealing-with-data.html#filtering"><i class="fa fa-check"></i><b>3.6.5</b> Filtering</a></li>
<li class="chapter" data-level="3.6.6" data-path="r---dealing-with-data.html"><a href="r---dealing-with-data.html#arranging"><i class="fa fa-check"></i><b>3.6.6</b> Arranging</a></li>
<li class="chapter" data-level="3.6.7" data-path="r---dealing-with-data.html"><a href="r---dealing-with-data.html#selecting"><i class="fa fa-check"></i><b>3.6.7</b> Selecting</a></li>
<li class="chapter" data-level="3.6.8" data-path="r---dealing-with-data.html"><a href="r---dealing-with-data.html#mutating"><i class="fa fa-check"></i><b>3.6.8</b> Mutating</a></li>
<li class="chapter" data-level="3.6.9" data-path="r---dealing-with-data.html"><a href="r---dealing-with-data.html#ifelse"><i class="fa fa-check"></i><b>3.6.9</b> Ifelse</a></li>
<li class="chapter" data-level="3.6.10" data-path="r---dealing-with-data.html"><a href="r---dealing-with-data.html#grouping-and-summarizing"><i class="fa fa-check"></i><b>3.6.10</b> Grouping and Summarizing</a></li>
<li class="chapter" data-level="3.6.11" data-path="r---dealing-with-data.html"><a href="r---dealing-with-data.html#changing-format-widelong"><i class="fa fa-check"></i><b>3.6.11</b> Changing Format (Wide/Long)</a></li>
<li class="chapter" data-level="3.6.12" data-path="r---dealing-with-data.html"><a href="r---dealing-with-data.html#missing-values"><i class="fa fa-check"></i><b>3.6.12</b> Missing Values</a></li>
<li class="chapter" data-level="3.6.13" data-path="r---dealing-with-data.html"><a href="r---dealing-with-data.html#counts"><i class="fa fa-check"></i><b>3.6.13</b> Counts</a></li>
<li class="chapter" data-level="3.6.14" data-path="r---dealing-with-data.html"><a href="r---dealing-with-data.html#ungrouping"><i class="fa fa-check"></i><b>3.6.14</b> Ungrouping</a></li>
<li class="chapter" data-level="3.6.15" data-path="r---dealing-with-data.html"><a href="r---dealing-with-data.html#stringscharacters"><i class="fa fa-check"></i><b>3.6.15</b> Strings/Characters</a></li>
<li class="chapter" data-level="3.6.16" data-path="r---dealing-with-data.html"><a href="r---dealing-with-data.html#splits"><i class="fa fa-check"></i><b>3.6.16</b> Splits</a></li>
<li class="chapter" data-level="3.6.17" data-path="r---dealing-with-data.html"><a href="r---dealing-with-data.html#mapping"><i class="fa fa-check"></i><b>3.6.17</b> Mapping</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="r---dealing-with-data.html"><a href="r---dealing-with-data.html#end"><i class="fa fa-check"></i><b>3.7</b> End</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html"><i class="fa fa-check"></i><b>4</b> Exploratory Data Analysis (EDA)</a>
<ul>
<li class="chapter" data-level="4.1" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#loading-data"><i class="fa fa-check"></i><b>4.1</b> Loading data</a></li>
<li class="chapter" data-level="4.2" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#checking-data"><i class="fa fa-check"></i><b>4.2</b> Checking data</a></li>
<li class="chapter" data-level="4.3" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#cleaning"><i class="fa fa-check"></i><b>4.3</b> Cleaning</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#cleaning-col.-names"><i class="fa fa-check"></i><b>4.3.1</b> Cleaning col. names</a></li>
<li class="chapter" data-level="4.3.2" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#date"><i class="fa fa-check"></i><b>4.3.2</b> Date</a></li>
<li class="chapter" data-level="4.3.3" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#cleaning-some-columns"><i class="fa fa-check"></i><b>4.3.3</b> Cleaning some columns</a></li>
<li class="chapter" data-level="4.3.4" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#dealing-with-na-values"><i class="fa fa-check"></i><b>4.3.4</b> Dealing with NA values</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#summarising"><i class="fa fa-check"></i><b>4.4</b> Summarising</a></li>
<li class="chapter" data-level="4.5" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#plots"><i class="fa fa-check"></i><b>4.5</b> Plots</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#formula"><i class="fa fa-check"></i><b>4.5.1</b> Formula</a></li>
<li class="chapter" data-level="4.5.2" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#cols-and-bars"><i class="fa fa-check"></i><b>4.5.2</b> Cols and Bars</a></li>
<li class="chapter" data-level="4.5.3" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#boxplots"><i class="fa fa-check"></i><b>4.5.3</b> Boxplots</a></li>
<li class="chapter" data-level="4.5.4" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#density"><i class="fa fa-check"></i><b>4.5.4</b> Density</a></li>
<li class="chapter" data-level="4.5.5" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#facets"><i class="fa fa-check"></i><b>4.5.5</b> Facets</a></li>
<li class="chapter" data-level="4.5.6" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#coord-flip"><i class="fa fa-check"></i><b>4.5.6</b> Coord flip</a></li>
<li class="chapter" data-level="4.5.7" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#correlation-plots"><i class="fa fa-check"></i><b>4.5.7</b> Correlation plots</a></li>
<li class="chapter" data-level="4.5.8" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#multiplots"><i class="fa fa-check"></i><b>4.5.8</b> Multiplots</a></li>
<li class="chapter" data-level="4.5.9" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#date-1"><i class="fa fa-check"></i><b>4.5.9</b> Date</a></li>
<li class="chapter" data-level="4.5.10" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#ordering-factors"><i class="fa fa-check"></i><b>4.5.10</b> Ordering factors</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#end-1"><i class="fa fa-check"></i><b>4.6</b> End</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Usefulness of R for managing data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r---dealing-with-data" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> R - Dealing with data<a href="r---dealing-with-data.html#r---dealing-with-data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="opening-files" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Opening files<a href="r---dealing-with-data.html#opening-files" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Before opening the data</strong><br />
First, you need to tell R where the files are located.
He is lazy that way, and will not look everywhere on your computer for them.
So, tell him by using the command <code>setwd()</code>.</p>
<p><strong>Reading the data</strong><br />
Usually, when using R, you want to work with data.
This data is usually already there and you want to open it in R.
The good thing is that R can read just about anything (just google “read”file type” in R” on google).
Here I show you how to read some of the most common formats.
Be sure to install the <code>xlsx</code> and <code>haven</code> packages to open Excell and SPSS files, respectively.
Additionally, there are multiple ways to read the same file.
Some will be built in R itself, others will require external packages.
This is important to know because some functions, although working, may be outdated or just give you some sort of weird error.
Maybe you can overcome this by using a different package.</p>
<p>If you want to import/read an Excel file, just use:<br />
<code>read.xlsx(file = 'example.xlsx', sheetName = 'page_1', header = TRUE)</code> (xlsx package)<br />
If a text<br />
<code>read.delim(file = 'example.txt', header = TRUE, sep = ',', dec = '.')</code><br />
CSV:<br />
<code>read.csv(file = 'example.csv', header = TRUE, sep = ',', dec = '.')</code><br />
SAV (SPSS):<br />
<code>read_sav(file = 'example.sav')</code> (haven package)</p>
<p><strong>Managing your imported data</strong><br />
To have your data in your environment, so that you can mess with it, you should assign your <code>read</code> command to a variable (object).
Lets say you do the following <code>mydata &lt;- read.delim(file = 'example.txt', header = TRUE, sep = ',', dec = '.')</code>.
Now, your <code>mydata</code> object is the dataframe containing that imported data set.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="r---dealing-with-data.html#cb33-1" aria-hidden="true" tabindex="-1"></a>mydata <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;data/heart/heart_2020_cleaned.csv&#39;</span>)</span></code></pre></div>
<p><strong>Possible problems</strong><br />
You may encounter several problems.
Here are a few of the most common error messages you will face when importing data to R.</p>
<ul>
<li>“the number of columns is superior to the data” or the data is all jumbled.</li>
</ul>
<p>Perhaps one of the most common problems.
This probably has to due with R separating columns where it shouldn’t and making more columns than it should.
You can fix this perhaps by making sure the <code>sep</code> command is specifying the exact separator of the file.
It helps to open the file with excel, for instance, and check the separator and the decimals symbol (you don’t want to be separating columns by the decimal symbol).
For instance, sometimes R reads the .csv file (which means comma separated file) and you have commas as decimals (instead “;” is the separator).
This creates way to many columns that mismatch the number of headers present.</p>
<ul>
<li>cannot open file ‘name_of_file.csv’: No such file or directory.</li>
</ul>
<p>Make sure you are in the right working directory or are specifying the path correctly.</p>
<p>There will surely be more problems, but you can find a way around them by using google.</p>
<p><strong>Checking the data</strong><br />
After you’ve opened the data, you should take a peak at it.
There’s several ways of doing this such as <code>head(df)</code> or some others I’m not recalling at the moment.
Lets see bellow.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="r---dealing-with-data.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mydata)</span>
<span id="cb34-2"><a href="r---dealing-with-data.html#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="r---dealing-with-data.html#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co"># you can add a &quot;,&quot; and say the number of rows you want to preview</span></span>
<span id="cb34-4"><a href="r---dealing-with-data.html#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mydata, <span class="dv">10</span>) </span>
<span id="cb34-5"><a href="r---dealing-with-data.html#cb34-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-6"><a href="r---dealing-with-data.html#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Or you can just View it all</span></span>
<span id="cb34-7"><a href="r---dealing-with-data.html#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="co">#View(mydata)</span></span></code></pre></div>
</div>
<div id="opening-multiple-files" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Opening multiple files<a href="r---dealing-with-data.html#opening-multiple-files" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Lets say you have a folder, lets assume is named “data”, and in there you have all your data files (files from each participant).
Ideally, to analyze and view the data as a whole, you would want to import all of the data files, and then merge them into a big data file, containing all the participants (identified accordingly).<br />
Here’s a snippet of code that would allow you to do that.
Beware though, any file that matches the criteria (in this case “.csv” files) will be gathered from the folder (your working directory).</p>
<p>Firstly, lets gather the names of the files in our directory that we want to import.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="r---dealing-with-data.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Setting our working directory</span></span>
<span id="cb35-2"><a href="r---dealing-with-data.html#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&#39;C:/Users/fabio/OneDrive/My Things/Stats/Teaching/R_Book/data&#39;</span>)</span>
<span id="cb35-3"><a href="r---dealing-with-data.html#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="r---dealing-with-data.html#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Empty list to list all txt files in folder</span></span>
<span id="cb35-5"><a href="r---dealing-with-data.html#cb35-5" aria-hidden="true" tabindex="-1"></a>list_of_files <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb35-6"><a href="r---dealing-with-data.html#cb35-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-7"><a href="r---dealing-with-data.html#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Searches for &quot;.csv&quot; files in the folder</span></span>
<span id="cb35-8"><a href="r---dealing-with-data.html#cb35-8" aria-hidden="true" tabindex="-1"></a>list_all_data <span class="ot">&lt;-</span> <span class="fu">dir</span>(<span class="at">pattern=</span><span class="st">&#39;.csv&#39;</span>)</span>
<span id="cb35-9"><a href="r---dealing-with-data.html#cb35-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-10"><a href="r---dealing-with-data.html#cb35-10" aria-hidden="true" tabindex="-1"></a><span class="co"># For each &quot;.csv&quot; file, append this file to a list that will contain all &quot;.csv&quot; file names.</span></span>
<span id="cb35-11"><a href="r---dealing-with-data.html#cb35-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (file <span class="cf">in</span> list_all_data){</span>
<span id="cb35-12"><a href="r---dealing-with-data.html#cb35-12" aria-hidden="true" tabindex="-1"></a>  list_of_files <span class="ot">&lt;-</span> <span class="fu">c</span>(list_of_files, file)</span>
<span id="cb35-13"><a href="r---dealing-with-data.html#cb35-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&#39;</span><span class="sc">\n</span><span class="st">File processed:&#39;</span>, file)  <span class="co"># prints the file names</span></span>
<span id="cb35-14"><a href="r---dealing-with-data.html#cb35-14" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## 
## File processed: Participant_1.csv
## File processed: Participant_10.csv
## File processed: Participant_2.csv
## File processed: Participant_3.csv
## File processed: Participant_4.csv
## File processed: Participant_5.csv
## File processed: Participant_6.csv
## File processed: Participant_7.csv
## File processed: Participant_8.csv
## File processed: Participant_9.csv</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="r---dealing-with-data.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Organizing the files</span></span>
<span id="cb37-2"><a href="r---dealing-with-data.html#cb37-2" aria-hidden="true" tabindex="-1"></a>list_of_files <span class="ot">&lt;-</span> <span class="fu">as.character</span>(list_of_files)  <span class="co"># To character</span></span>
<span id="cb37-3"><a href="r---dealing-with-data.html#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="co">#list_of_files &lt;- mixedsort(sort(list_of_files))  # Sorting them by name</span></span>
<span id="cb37-4"><a href="r---dealing-with-data.html#cb37-4" aria-hidden="true" tabindex="-1"></a>list_of_files <span class="ot">&lt;-</span> <span class="fu">as.list</span>(list_of_files)  <span class="co"># Transforming it to list</span></span>
<span id="cb37-5"><a href="r---dealing-with-data.html#cb37-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-6"><a href="r---dealing-with-data.html#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="co"># How many files were processed?</span></span>
<span id="cb37-7"><a href="r---dealing-with-data.html#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&#39;</span><span class="sc">\n</span><span class="st">Total number of files processed:&#39;</span>, <span class="fu">length</span>(<span class="fu">unlist</span>(list_of_files)))</span></code></pre></div>
<pre><code>## 
## Total number of files processed: 10</code></pre>
<p>Then we need to create a function that iterates over all of this file names.
It will need to import each file (by their name) and append them to a general dataframe.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="r---dealing-with-data.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Setting our working directory</span></span>
<span id="cb39-2"><a href="r---dealing-with-data.html#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&#39;C:/Users/fabio/OneDrive/My Things/Stats/Teaching/R_Book/data&#39;</span>)</span>
<span id="cb39-3"><a href="r---dealing-with-data.html#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="r---dealing-with-data.html#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an empty dataframe where all data will be stored</span></span>
<span id="cb39-5"><a href="r---dealing-with-data.html#cb39-5" aria-hidden="true" tabindex="-1"></a>df_all <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb39-6"><a href="r---dealing-with-data.html#cb39-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-7"><a href="r---dealing-with-data.html#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a simple reading function for every element in a list</span></span>
<span id="cb39-8"><a href="r---dealing-with-data.html#cb39-8" aria-hidden="true" tabindex="-1"></a>import_data <span class="ot">&lt;-</span> <span class="cf">function</span>(file_name){</span>
<span id="cb39-9"><a href="r---dealing-with-data.html#cb39-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (name <span class="cf">in</span> file_name){  <span class="co"># for every name in that list</span></span>
<span id="cb39-10"><a href="r---dealing-with-data.html#cb39-10" aria-hidden="true" tabindex="-1"></a>    df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(name, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">encoding =</span> <span class="st">&#39;utf-8&#39;</span>, <span class="at">sep=</span><span class="st">&#39;,&#39;</span>)  <span class="co"># read that name and assign it to &quot;df&quot;</span></span>
<span id="cb39-11"><a href="r---dealing-with-data.html#cb39-11" aria-hidden="true" tabindex="-1"></a>    df_all <span class="ot">&lt;-</span> <span class="fu">rbind</span>(df_all, df)  <span class="co"># add &quot;df&quot; to that list   </span></span>
<span id="cb39-12"><a href="r---dealing-with-data.html#cb39-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb39-13"><a href="r---dealing-with-data.html#cb39-13" aria-hidden="true" tabindex="-1"></a>  df_all <span class="ot">&lt;&lt;-</span> df_all  <span class="co"># Makes this object available globally</span></span>
<span id="cb39-14"><a href="r---dealing-with-data.html#cb39-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb39-15"><a href="r---dealing-with-data.html#cb39-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-16"><a href="r---dealing-with-data.html#cb39-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Running function</span></span>
<span id="cb39-17"><a href="r---dealing-with-data.html#cb39-17" aria-hidden="true" tabindex="-1"></a><span class="fu">import_data</span>(<span class="at">file_name =</span> list_of_files)</span></code></pre></div>
</div>
<div id="merging" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Merging<a href="r---dealing-with-data.html#merging" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You can join two data frames either by rows or by columns.
Typically, you use rows when you try too join more data to your current data frame.
To do so, you can use <code>rbind()</code>.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="r---dealing-with-data.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Splitting the data by rows</span></span>
<span id="cb40-2"><a href="r---dealing-with-data.html#cb40-2" aria-hidden="true" tabindex="-1"></a>d1 <span class="ot">&lt;-</span> USArrests[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>, ]</span>
<span id="cb40-3"><a href="r---dealing-with-data.html#cb40-3" aria-hidden="true" tabindex="-1"></a>d2 <span class="ot">&lt;-</span> USArrests[<span class="dv">21</span><span class="sc">:</span><span class="fu">nrow</span>(USArrests), ]</span>
<span id="cb40-4"><a href="r---dealing-with-data.html#cb40-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-5"><a href="r---dealing-with-data.html#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a new dataframe with the merged data</span></span>
<span id="cb40-6"><a href="r---dealing-with-data.html#cb40-6" aria-hidden="true" tabindex="-1"></a>merged_d <span class="ot">&lt;-</span> <span class="fu">rbind</span>(d1, d2)</span></code></pre></div>
<p>More frequently, perhaps, you want to join complementary information (more variables) to your preexisting data.
To do so, you can use <code>cbind()</code>.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="r---dealing-with-data.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Splitting the data by columns</span></span>
<span id="cb41-2"><a href="r---dealing-with-data.html#cb41-2" aria-hidden="true" tabindex="-1"></a>d1 <span class="ot">&lt;-</span> USArrests[, <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)]</span>
<span id="cb41-3"><a href="r---dealing-with-data.html#cb41-3" aria-hidden="true" tabindex="-1"></a>d2 <span class="ot">&lt;-</span> USArrests[, <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">4</span>)]</span>
<span id="cb41-4"><a href="r---dealing-with-data.html#cb41-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-5"><a href="r---dealing-with-data.html#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a new dataframe with the merged data</span></span>
<span id="cb41-6"><a href="r---dealing-with-data.html#cb41-6" aria-hidden="true" tabindex="-1"></a>merged_d <span class="ot">&lt;-</span> <span class="fu">cbind</span>(d1, d2)</span></code></pre></div>
<p>However, this above code only works correctly (as intended) if your data is perfectly lined up.
For instance, <code>rbind()</code> will work if you have the same number of variables (columns), with the same names and in the same positions.
So you need to be sure this is the case before you merge the data frames.</p>
<p>As for <code>cbind()</code> on the other hand, it requires you to have the same number of entire (rows) and for these to be arranged in the same manner (otherwise your info would mismatch).
You can try and order things correctly, but you can easily place some information incorrectly.
To circumvent this, you can use <code>merge()</code>.
In this command you only have to specify the IDs (e.g., “sample_ID” or “person_ID”) that allow R to connect the information in the right place.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="r---dealing-with-data.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Preparing the data</span></span>
<span id="cb42-2"><a href="r---dealing-with-data.html#cb42-2" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> USArrests  </span>
<span id="cb42-3"><a href="r---dealing-with-data.html#cb42-3" aria-hidden="true" tabindex="-1"></a>d<span class="sc">$</span>State <span class="ot">&lt;-</span> <span class="fu">rownames</span>(d)  </span>
<span id="cb42-4"><a href="r---dealing-with-data.html#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(d) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb42-5"><a href="r---dealing-with-data.html#cb42-5" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> d[, <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>)]</span>
<span id="cb42-6"><a href="r---dealing-with-data.html#cb42-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-7"><a href="r---dealing-with-data.html#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating two separate dataframes</span></span>
<span id="cb42-8"><a href="r---dealing-with-data.html#cb42-8" aria-hidden="true" tabindex="-1"></a>d1 <span class="ot">&lt;-</span> d[, <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)]</span>
<span id="cb42-9"><a href="r---dealing-with-data.html#cb42-9" aria-hidden="true" tabindex="-1"></a>d2 <span class="ot">&lt;-</span> d[, <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>)]</span></code></pre></div>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="r---dealing-with-data.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Joining dataframes by the &quot;State&quot; column</span></span>
<span id="cb43-2"><a href="r---dealing-with-data.html#cb43-2" aria-hidden="true" tabindex="-1"></a>d_all <span class="ot">&lt;-</span> <span class="fu">merge</span>(<span class="at">x =</span> d1, <span class="at">y =</span> d2, <span class="at">by =</span> <span class="st">&#39;State&#39;</span>)</span></code></pre></div>
<p>Now lets say the data frames weren’t perfectly matched.
For instance lets say we remove Alabama from <code>d1</code>.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="r---dealing-with-data.html#cb44-1" aria-hidden="true" tabindex="-1"></a>d1 <span class="ot">&lt;-</span> d1[<span class="sc">-</span><span class="dv">1</span>, ]  <span class="co"># Removing Alabama</span></span>
<span id="cb44-2"><a href="r---dealing-with-data.html#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="r---dealing-with-data.html#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Merging</span></span>
<span id="cb44-4"><a href="r---dealing-with-data.html#cb44-4" aria-hidden="true" tabindex="-1"></a>d_all <span class="ot">&lt;-</span> <span class="fu">merge</span>(<span class="at">x =</span> d1, <span class="at">y =</span> d2, <span class="at">by =</span> <span class="st">&#39;State&#39;</span>)  <span class="co"># adds only what matches</span></span>
<span id="cb44-5"><a href="r---dealing-with-data.html#cb44-5" aria-hidden="true" tabindex="-1"></a>d_all <span class="ot">&lt;-</span> <span class="fu">merge</span>(<span class="at">x =</span> d1, <span class="at">y =</span> d2, <span class="at">by =</span> <span class="st">&#39;State&#39;</span>, <span class="at">all =</span> <span class="cn">TRUE</span>)  <span class="co"># adds everything</span></span>
<span id="cb44-6"><a href="r---dealing-with-data.html#cb44-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-7"><a href="r---dealing-with-data.html#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d_all)</span></code></pre></div>
<pre><code>##        State UrbanPop Murder Assault Rape
## 1    Alabama       NA   13.2     236 21.2
## 2     Alaska       48   10.0     263 44.5
## 3    Arizona       80    8.1     294 31.0
## 4   Arkansas       50    8.8     190 19.5
## 5 California       91    9.0     276 40.6
## 6   Colorado       78    7.9     204 38.7</code></pre>
<p>Now you check the <code>d_all</code> you will see that there is no Alabama.
You can use the parameter <code>all</code> or <code>all.x</code> or <code>all.y</code> to indicate if you want all of the rows in the data frames (either all or just the x or y data frames, respectively) to be added to the final data frame.
If so, as you can see, Alabama is also imported, even thought there is <code>NA</code> in the in one of the fields (because even though its not in d1, it is in the d2 data frame).
There are other parameters that can be tweaked for more specific scenarios, just run <code>?merge()</code> to explore the function and its parameters.</p>
</div>
<div id="exporting" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Exporting<a href="r---dealing-with-data.html#exporting" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Aside from importing, sometimes we also want to export the files we created/modified in R.
We can do this with several commands, but perhaps the simpler ones are:</p>
<p><code>write.table(x = df, file = 'namewewant.txt', sep = ',', dec = '.')</code></p>
<p>This tells R to export the <code>df</code> dataframe, to a not existing file with a name “namewewant.txt”, that is separated by commas and has “.” for decimal points.
We can also export to an existing data file, and ask for <code>append = TRUE</code>, thus appending our data to the data already existing in that file.
Be sure thought, that this data has the same structure (e.g., number of columns, position of the columns).</p>
<p>We can also do the same thing as above, but instead create a “.csv” file.</p>
<p><code>write.csv(x = df, file = 'namewewant.csv')</code></p>
<p>As an example, lets export the dataframe we created in the chunks above.
Note that if we don’t specify the path along with the name of the file to be created, R will save the file to the current working directory.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="r---dealing-with-data.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tells the path I want to export to.</span></span>
<span id="cb46-2"><a href="r---dealing-with-data.html#cb46-2" aria-hidden="true" tabindex="-1"></a>path <span class="ot">=</span> <span class="st">&#39;C:/Users/fabio/OneDrive/My Things/Stats/Teaching/R_Book/&#39;</span></span>
<span id="cb46-3"><a href="r---dealing-with-data.html#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="r---dealing-with-data.html#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Merges the path with the file name I want to give it.</span></span>
<span id="cb46-5"><a href="r---dealing-with-data.html#cb46-5" aria-hidden="true" tabindex="-1"></a>filename <span class="ot">&lt;-</span> <span class="fu">paste</span>(path, <span class="st">&#39;some_data.csv&#39;</span>, <span class="at">sep =</span> <span class="st">&#39;&#39;</span>)</span>
<span id="cb46-6"><a href="r---dealing-with-data.html#cb46-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-7"><a href="r---dealing-with-data.html#cb46-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Export it</span></span>
<span id="cb46-8"><a href="r---dealing-with-data.html#cb46-8" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(<span class="at">x =</span> df_all, <span class="at">file =</span> filename)</span></code></pre></div>
</div>
<div id="special-cases-in-r" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> Special cases in R<a href="r---dealing-with-data.html#special-cases-in-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In R variables, but more specifically on data frames, you can encounter the following default symbols:</p>
<ul>
<li><p><strong>NA</strong>: Not Available (i.e., missing value)</p></li>
<li><p><strong>NaN</strong>: Not a Number (e.g., 0/0)</p></li>
<li><p><strong>Inf</strong> e <strong>-Inf</strong>: Infinity</p></li>
</ul>
<p>These are special categories of values and can mess up your transformations and functions.
We will talk about them more in the next chapter.</p>
</div>
<div id="manipulating-the-data-in-dataframes" class="section level2 hasAnchor" number="3.6">
<h2><span class="header-section-number">3.6</span> Manipulating the data in dataframes<a href="r---dealing-with-data.html#manipulating-the-data-in-dataframes" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now, in R you can manage your dataframe as you please.
You can do anything.
And I truly mean anything.
Anything you can do in Excel and then some.</p>
<div id="subsetting-a-dataframe" class="section level3 hasAnchor" number="3.6.1">
<h3><span class="header-section-number">3.6.1</span> Subsetting a dataframe<a href="r---dealing-with-data.html#subsetting-a-dataframe" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Subsetting is a very important skill that you should try to master.
It allows you to select only the portions of your data frame that you want.
This is vital for any type of data manipulation and cleaning you try to accomplish.</p>
<p>The symbols <code>$</code> lets you subset (select) columns of a dataframe really easily, if you just want a column.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="r---dealing-with-data.html#cb47-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> iris</span>
<span id="cb47-2"><a href="r---dealing-with-data.html#cb47-2" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>Sepal.Length</span></code></pre></div>
<pre><code>##   [1] 5.1 4.9 4.7 4.6 5.0 5.4 4.6 5.0 4.4 4.9 5.4 4.8 4.8 4.3 5.8 5.7 5.4 5.1
##  [19] 5.7 5.1 5.4 5.1 4.6 5.1 4.8 5.0 5.0 5.2 5.2 4.7 4.8 5.4 5.2 5.5 4.9 5.0
##  [37] 5.5 4.9 4.4 5.1 5.0 4.5 4.4 5.0 5.1 4.8 5.1 4.6 5.3 5.0 7.0 6.4 6.9 5.5
##  [55] 6.5 5.7 6.3 4.9 6.6 5.2 5.0 5.9 6.0 6.1 5.6 6.7 5.6 5.8 6.2 5.6 5.9 6.1
##  [73] 6.3 6.1 6.4 6.6 6.8 6.7 6.0 5.7 5.5 5.5 5.8 6.0 5.4 6.0 6.7 6.3 5.6 5.5
##  [91] 5.5 6.1 5.8 5.0 5.6 5.7 5.7 6.2 5.1 5.7 6.3 5.8 7.1 6.3 6.5 7.6 4.9 7.3
## [109] 6.7 7.2 6.5 6.4 6.8 5.7 5.8 6.4 6.5 7.7 7.7 6.0 6.9 5.6 7.7 6.3 6.7 7.2
## [127] 6.2 6.1 6.4 7.2 7.4 7.9 6.4 6.3 6.1 7.7 6.3 6.4 6.0 6.9 6.7 6.9 5.8 6.8
## [145] 6.7 6.7 6.3 6.5 6.2 5.9</code></pre>
<p>If you want more columns, you can use <code>[]</code>.
By indicating <code>df[rows,columns]</code>.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="r---dealing-with-data.html#cb49-1" aria-hidden="true" tabindex="-1"></a>df[ , <span class="st">&#39;Sepal.Length&#39;</span>]  <span class="co"># just the &quot;Sepal.Length]&quot;</span></span></code></pre></div>
<pre><code>##   [1] 5.1 4.9 4.7 4.6 5.0 5.4 4.6 5.0 4.4 4.9 5.4 4.8 4.8 4.3 5.8 5.7 5.4 5.1
##  [19] 5.7 5.1 5.4 5.1 4.6 5.1 4.8 5.0 5.0 5.2 5.2 4.7 4.8 5.4 5.2 5.5 4.9 5.0
##  [37] 5.5 4.9 4.4 5.1 5.0 4.5 4.4 5.0 5.1 4.8 5.1 4.6 5.3 5.0 7.0 6.4 6.9 5.5
##  [55] 6.5 5.7 6.3 4.9 6.6 5.2 5.0 5.9 6.0 6.1 5.6 6.7 5.6 5.8 6.2 5.6 5.9 6.1
##  [73] 6.3 6.1 6.4 6.6 6.8 6.7 6.0 5.7 5.5 5.5 5.8 6.0 5.4 6.0 6.7 6.3 5.6 5.5
##  [91] 5.5 6.1 5.8 5.0 5.6 5.7 5.7 6.2 5.1 5.7 6.3 5.8 7.1 6.3 6.5 7.6 4.9 7.3
## [109] 6.7 7.2 6.5 6.4 6.8 5.7 5.8 6.4 6.5 7.7 7.7 6.0 6.9 5.6 7.7 6.3 6.7 7.2
## [127] 6.2 6.1 6.4 7.2 7.4 7.9 6.4 6.3 6.1 7.7 6.3 6.4 6.0 6.9 6.7 6.9 5.8 6.8
## [145] 6.7 6.7 6.3 6.5 6.2 5.9</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="r---dealing-with-data.html#cb51-1" aria-hidden="true" tabindex="-1"></a>df[<span class="dv">5</span>, ]   <span class="co"># row 5 across all columns</span></span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 5            5         3.6          1.4         0.2  setosa</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="r---dealing-with-data.html#cb53-1" aria-hidden="true" tabindex="-1"></a>df[<span class="dv">1</span>, <span class="st">&#39;Sepal.Length&#39;</span>]  <span class="co"># row 1 of the &quot;Sepal.Length&quot; column</span></span></code></pre></div>
<pre><code>## [1] 5.1</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="r---dealing-with-data.html#cb55-1" aria-hidden="true" tabindex="-1"></a>df[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>), <span class="fu">c</span>(<span class="st">&#39;Sepal.Length&#39;</span>, <span class="st">&#39;Sepal.Width&#39;</span>)]  <span class="co"># row 1 to 5 from the Sepal.Length&quot; and &quot;Sepal.Width&quot;&quot;</span></span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width
## 1          5.1         3.5
## 2          4.9         3.0
## 3          4.7         3.2
## 4          4.6         3.1
## 5          5.0         3.6</code></pre>
</div>
<div id="columns" class="section level3 hasAnchor" number="3.6.2">
<h3><span class="header-section-number">3.6.2</span> Columns<a href="r---dealing-with-data.html#columns" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Lets start by some simply manipulations.
Lets say you want to change column names.
Ideally, I would avoid spaces in the headers (and overall actually) but you do as you please.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="r---dealing-with-data.html#cb57-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> iris  <span class="co"># iris (mtcars) is a built-in dataset. Just imagine I&#39;m reading from a file</span></span>
<span id="cb57-2"><a href="r---dealing-with-data.html#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 1</span></span>
<span id="cb57-3"><a href="r---dealing-with-data.html#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;Colname 1&#39;</span>, <span class="st">&#39;Colname 2&#39;</span>, <span class="st">&#39;Colname 3&#39;</span>, <span class="st">&#39;Colname 4&#39;</span>, <span class="st">&#39;Colname 5&#39;</span>)</span>
<span id="cb57-4"><a href="r---dealing-with-data.html#cb57-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-5"><a href="r---dealing-with-data.html#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 2</span></span>
<span id="cb57-6"><a href="r---dealing-with-data.html#cb57-6" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;Colname 1&#39;</span>, <span class="st">&#39;Colname 2&#39;</span>, <span class="st">&#39;Colname 3&#39;</span>, <span class="st">&#39;Colname 4&#39;</span>, <span class="st">&#39;Colname 5&#39;</span>)</span>
<span id="cb57-7"><a href="r---dealing-with-data.html#cb57-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-8"><a href="r---dealing-with-data.html#cb57-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Or just change a specific column name</span></span>
<span id="cb57-9"><a href="r---dealing-with-data.html#cb57-9" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df)[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="st">&#39;Colname 2 - New&#39;</span></span>
<span id="cb57-10"><a href="r---dealing-with-data.html#cb57-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-11"><a href="r---dealing-with-data.html#cb57-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Final result</span></span>
<span id="cb57-12"><a href="r---dealing-with-data.html#cb57-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span></code></pre></div>
<pre><code>##   Colname 1 Colname 2 - New Colname 3 Colname 4 Colname 5
## 1       5.1             3.5       1.4       0.2    setosa
## 2       4.9             3.0       1.4       0.2    setosa
## 3       4.7             3.2       1.3       0.2    setosa
## 4       4.6             3.1       1.5       0.2    setosa
## 5       5.0             3.6       1.4       0.2    setosa
## 6       5.4             3.9       1.7       0.4    setosa</code></pre>
<p>We can also change the order of the columns.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="r---dealing-with-data.html#cb59-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> iris <span class="co"># Just restoring the dataframe to be less confusing</span></span>
<span id="cb59-2"><a href="r---dealing-with-data.html#cb59-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df[,<span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)]  <span class="co"># 5 column shows up first now, followed by the previous first column, etc...</span></span></code></pre></div>
<p>We can sort by a specific (or multiple columns).</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="r---dealing-with-data.html#cb60-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df[<span class="fu">order</span>(df[, <span class="dv">2</span>]), ]  <span class="co"># Orders by second column</span></span>
<span id="cb60-2"><a href="r---dealing-with-data.html#cb60-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df[<span class="fu">order</span>(<span class="sc">-</span>df[, <span class="dv">2</span>]), ]  <span class="co"># Orders by second column descending</span></span>
<span id="cb60-3"><a href="r---dealing-with-data.html#cb60-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-4"><a href="r---dealing-with-data.html#cb60-4" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df[<span class="fu">order</span>(<span class="sc">-</span>df[, <span class="dv">2</span>], df[, <span class="dv">3</span>]), ]  <span class="co"># Orders by second columns descending and then by third column</span></span>
<span id="cb60-5"><a href="r---dealing-with-data.html#cb60-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-6"><a href="r---dealing-with-data.html#cb60-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Alternatively since this is a bit confusing (does the same as above, respectively)</span></span>
<span id="cb60-7"><a href="r---dealing-with-data.html#cb60-7" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">arrange</span>(df, Sepal.Length)</span>
<span id="cb60-8"><a href="r---dealing-with-data.html#cb60-8" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">arrange</span>(df, <span class="fu">desc</span>(Sepal.Length))</span>
<span id="cb60-9"><a href="r---dealing-with-data.html#cb60-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-10"><a href="r---dealing-with-data.html#cb60-10" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">arrange</span>(df, <span class="fu">desc</span>(Sepal.Length), Sepal.Width)</span></code></pre></div>
<p>We can create new columns.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="r---dealing-with-data.html#cb61-1" aria-hidden="true" tabindex="-1"></a>new_data <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">&#39;New info&#39;</span>, <span class="fu">nrow</span>(df))  <span class="co"># Creating new irrelevant data</span></span>
<span id="cb61-2"><a href="r---dealing-with-data.html#cb61-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-3"><a href="r---dealing-with-data.html#cb61-3" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>NewColumn <span class="ot">&lt;-</span> new_data  <span class="co"># Added this data (data must have same length as dataframe!)</span></span>
<span id="cb61-4"><a href="r---dealing-with-data.html#cb61-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-5"><a href="r---dealing-with-data.html#cb61-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span></code></pre></div>
<pre><code>##     Species Sepal.Length Sepal.Width Petal.Length Petal.Width NewColumn
## 1 virginica          7.9         3.8          6.4         2.0  New info
## 2 virginica          7.7         2.6          6.9         2.3  New info
## 3 virginica          7.7         2.8          6.7         2.0  New info
## 4 virginica          7.7         3.0          6.1         2.3  New info
## 5 virginica          7.7         3.8          6.7         2.2  New info
## 6 virginica          7.6         3.0          6.6         2.1  New info</code></pre>
<p>We can remove columns.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="r---dealing-with-data.html#cb63-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>Petal.Length <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb63-2"><a href="r---dealing-with-data.html#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb63-3"><a href="r---dealing-with-data.html#cb63-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">within</span>(df, <span class="fu">rm</span>(Sepal.Length))</span></code></pre></div>
<p>And we can create and transform the columns.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="r---dealing-with-data.html#cb64-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> iris</span>
<span id="cb64-2"><a href="r---dealing-with-data.html#cb64-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-3"><a href="r---dealing-with-data.html#cb64-3" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>Sepal_Area <span class="ot">&lt;-</span> df<span class="sc">$</span>Sepal.Length <span class="sc">*</span> df<span class="sc">$</span>Sepal.Width  <span class="co"># Creating new variable with is the multiplication of the first 2.</span></span>
<span id="cb64-4"><a href="r---dealing-with-data.html#cb64-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-5"><a href="r---dealing-with-data.html#cb64-5" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>Sepal_Area <span class="ot">&lt;-</span> <span class="fu">round</span>(df<span class="sc">$</span>Sepal_Area, <span class="dv">1</span>)  <span class="co"># Transforming existing variable, making it just 1 decimal.</span></span>
<span id="cb64-6"><a href="r---dealing-with-data.html#cb64-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-7"><a href="r---dealing-with-data.html#cb64-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species Sepal_Area
## 1          5.1         3.5          1.4         0.2  setosa       17.8
## 2          4.9         3.0          1.4         0.2  setosa       14.7
## 3          4.7         3.2          1.3         0.2  setosa       15.0
## 4          4.6         3.1          1.5         0.2  setosa       14.3
## 5          5.0         3.6          1.4         0.2  setosa       18.0
## 6          5.4         3.9          1.7         0.4  setosa       21.1</code></pre>
</div>
<div id="rows" class="section level3 hasAnchor" number="3.6.3">
<h3><span class="header-section-number">3.6.3</span> Rows<a href="r---dealing-with-data.html#rows" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Altering specific rows is a bit trickier.
Fortunatelly, this is usually less relevant, since we usually just want to change or apply a condition to an entire column.
Having said this, here’s some relevant commands.</p>
<p>Say you want to alter rows that meet a condition.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="r---dealing-with-data.html#cb66-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>Sepal.Length[df<span class="sc">$</span>Sepal.Length <span class="sc">&lt;=</span> <span class="dv">5</span>] <span class="ot">&lt;-</span> <span class="st">&#39;&lt;5&#39;</span>  <span class="co"># Any value in in the Sepal.Length column that is less or equal than five will turn to 0</span></span>
<span id="cb66-2"><a href="r---dealing-with-data.html#cb66-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-3"><a href="r---dealing-with-data.html#cb66-3" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>Sepal.Length[df<span class="sc">$</span>Sepal.Length <span class="sc">==</span> <span class="fl">7.9</span>] <span class="ot">&lt;-</span> <span class="dv">8</span>  <span class="co"># Changing rows with 7.9 to 8. </span></span></code></pre></div>
<p>Or want to create a new entry (i.e., row).</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="r---dealing-with-data.html#cb67-1" aria-hidden="true" tabindex="-1"></a>row <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fl">5.6</span>, <span class="fl">3.2</span>, <span class="fl">1.9</span>, <span class="fl">0.1</span>, <span class="st">&#39;new_species&#39;</span>, <span class="dv">10000</span>)  <span class="co"># Create a new row (all columns must be filled)</span></span>
<span id="cb67-2"><a href="r---dealing-with-data.html#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(row) <span class="ot">&lt;-</span> <span class="fu">colnames</span>(df)</span>
<span id="cb67-3"><a href="r---dealing-with-data.html#cb67-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">rbind</span>(df, row)</span>
<span id="cb67-4"><a href="r---dealing-with-data.html#cb67-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-5"><a href="r---dealing-with-data.html#cb67-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(df)</span></code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width     Species Sepal_Area
## 146          6.7         3.0          5.2         2.3   virginica       20.1
## 147          6.3         2.5          5.0         1.9   virginica       15.8
## 148          6.5         3.0          5.2         2.0   virginica       19.5
## 149          6.2         3.4          5.4         2.3   virginica       21.1
## 150          5.9         3.0          5.1         1.8   virginica       17.7
## 151          5.6         3.2          1.9         0.1 new_species    10000.0</code></pre>
<p>Or just want to delete a row.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="r---dealing-with-data.html#cb69-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">151</span>, <span class="dv">152</span>),]  <span class="co"># deletes row 152 and 152</span></span></code></pre></div>
<p>If you want a package that allows you to do the above changes in rows and columns just like you would in Excel, you can too.
Just visit: <a href="https://cran.r-project.org/web/packages/DataEditR/vignettes/DataEditR.html" class="uri">https://cran.r-project.org/web/packages/DataEditR/vignettes/DataEditR.html</a></p>
<p>Although I would argue against it, since this doesn’t make your R code easy to re-execute.</p>
</div>
<div id="tidyverse-pipes" class="section level3 hasAnchor" number="3.6.4">
<h3><span class="header-section-number">3.6.4</span> Tidyverse &amp; Pipes<a href="r---dealing-with-data.html#tidyverse-pipes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Before presenting the following commands below, we should talk quickly about tidyverse and pipes.
Tidyverse, as the name implies “Tidy” + “[Uni]verse” is a big package that contains more packages.
All of these packages are designed for data science.
These are:</p>
<ul>
<li><p><strong>dplyr</strong>: Basic grammar for data manipulation (also responsible for pipes).</p></li>
<li><p><strong>ggplot2</strong>: Used to create all sorts of graphics.</p></li>
<li><p><strong>forcats</strong>: Facilitates functional programming for data science (e.g., can replace loops with maps, a simpler command)</p></li>
<li><p><strong>tibble</strong>: Better dataframe, making it cleaner and more efficient (although they are mostly interchangeable).</p></li>
<li><p><strong>readr</strong>: Reads data of several types in a smart manner (including csv).</p></li>
<li><p><strong>stringr</strong>: Makes working with string information easy.</p></li>
<li><p><strong>tidyr</strong>: Helps to tidy data presentation.</p></li>
<li><p><strong>purr</strong>: Makes handling factors (categorical variables) easier.</p></li>
</ul>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="r---dealing-with-data.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## -- Attaching packages --------------------------------------- tidyverse 1.3.1 --</code></pre>
<pre><code>## v ggplot2 3.3.6     v purrr   0.3.4
## v tibble  3.1.5     v dplyr   1.0.8
## v tidyr   1.2.0     v stringr 1.4.0
## v readr   2.1.2     v forcats 0.5.1</code></pre>
<pre><code>## Warning: package &#39;ggplot2&#39; was built under R version 4.1.3</code></pre>
<pre><code>## Warning: package &#39;tidyr&#39; was built under R version 4.1.3</code></pre>
<pre><code>## Warning: package &#39;readr&#39; was built under R version 4.1.3</code></pre>
<pre><code>## Warning: package &#39;dplyr&#39; was built under R version 4.1.3</code></pre>
<pre><code>## -- Conflicts ------------------------------------------ tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<p>As you can see by the output you get when you load it, it basically loads them all making in a single line.</p>
<p>Now onto pipes.
Basically this allow you to chain your commands.
It comes from the <code>dplyr</code> or <code>magritrr</code> packages.
It can be read as follows:</p>
<p><code>WITH THIS %&gt;% EXECUTE THIS %&gt;% THEN EXECUTE THIS %&gt;% THEN THIS</code></p>
<p>So instead of this:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="r---dealing-with-data.html#cb78-1" aria-hidden="true" tabindex="-1"></a>object <span class="ot">&lt;-</span> <span class="fu">function_1</span>(object)</span>
<span id="cb78-2"><a href="r---dealing-with-data.html#cb78-2" aria-hidden="true" tabindex="-1"></a>object <span class="ot">&lt;-</span> <span class="fu">function_2</span>(object)</span>
<span id="cb78-3"><a href="r---dealing-with-data.html#cb78-3" aria-hidden="true" tabindex="-1"></a>object <span class="ot">&lt;-</span> <span class="fu">function_3</span>(object)</span>
<span id="cb78-4"><a href="r---dealing-with-data.html#cb78-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-5"><a href="r---dealing-with-data.html#cb78-5" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb78-6"><a href="r---dealing-with-data.html#cb78-6" aria-hidden="true" tabindex="-1"></a>object <span class="ot">&lt;-</span> <span class="fu">function_3</span>(<span class="fu">function_2</span>(<span class="fu">function_1</span>(object)))</span></code></pre></div>
<p>We can instead have this</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="r---dealing-with-data.html#cb79-1" aria-hidden="true" tabindex="-1"></a>object <span class="sc">%&gt;%</span> </span>
<span id="cb79-2"><a href="r---dealing-with-data.html#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">function_1</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb79-3"><a href="r---dealing-with-data.html#cb79-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">function_2</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb79-4"><a href="r---dealing-with-data.html#cb79-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">function_3</span>()</span></code></pre></div>
<p>Here are two concrete examples:</p>
<ol style="list-style-type: decimal">
<li><p>With 4+4, add another 4.
<code>4+4 %&gt;% +4</code></p></li>
<li><p>With my dataframe (df), select its “column1” and then calculate the mean.
<code>df %&gt;% select(column1) %&gt;% mean()</code></p></li>
</ol>
<p>Remember, you can call this pipe command by pressing “CTRL &amp; SHIFT + M” in Windows and Command + Shift + M on a Mac.</p>
<p>You may find it weird at first, but trust me, it will become intuitive in no time.</p>
<p>If you want a better tutorial on pipes just visit the following link: <a href="https://www.datacamp.com/community/tutorials/pipe-r-tutorial" class="uri">https://www.datacamp.com/community/tutorials/pipe-r-tutorial</a></p>
</div>
<div id="filtering" class="section level3 hasAnchor" number="3.6.5">
<h3><span class="header-section-number">3.6.5</span> Filtering<a href="r---dealing-with-data.html#filtering" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now, lets say we want to <strong>filter</strong> the dataframe.
That is, we want to select our data based on some criteria.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="r---dealing-with-data.html#cb80-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> iris</span>
<span id="cb80-2"><a href="r---dealing-with-data.html#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="co">#We can filter by Species. In this case we are only selecting &quot;setosa&quot;.</span></span>
<span id="cb80-3"><a href="r---dealing-with-data.html#cb80-3" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb80-4"><a href="r---dealing-with-data.html#cb80-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Species <span class="sc">==</span> <span class="st">&#39;setosa&#39;</span>)</span>
<span id="cb80-5"><a href="r---dealing-with-data.html#cb80-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-6"><a href="r---dealing-with-data.html#cb80-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Or we can select &quot;everything but&quot;.</span></span>
<span id="cb80-7"><a href="r---dealing-with-data.html#cb80-7" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb80-8"><a href="r---dealing-with-data.html#cb80-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Species <span class="sc">!=</span> <span class="st">&#39;setosa&#39;</span>)</span>
<span id="cb80-9"><a href="r---dealing-with-data.html#cb80-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-10"><a href="r---dealing-with-data.html#cb80-10" aria-hidden="true" tabindex="-1"></a><span class="co"># And we can even select multiple things</span></span>
<span id="cb80-11"><a href="r---dealing-with-data.html#cb80-11" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb80-12"><a href="r---dealing-with-data.html#cb80-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Species <span class="sc">!=</span> <span class="st">&#39;setosa&#39;</span> <span class="sc">&amp;</span> Sepal.Length <span class="sc">&gt;</span> <span class="fl">7.5</span>)</span>
<span id="cb80-13"><a href="r---dealing-with-data.html#cb80-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-14"><a href="r---dealing-with-data.html#cb80-14" aria-hidden="true" tabindex="-1"></a><span class="co"># We can also select one &quot;OR&quot; the other</span></span>
<span id="cb80-15"><a href="r---dealing-with-data.html#cb80-15" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb80-16"><a href="r---dealing-with-data.html#cb80-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Species <span class="sc">!=</span> <span class="st">&#39;setosa&#39;</span> <span class="sc">|</span> Sepal.Length <span class="sc">&gt;</span> <span class="fl">7.5</span>)</span>
<span id="cb80-17"><a href="r---dealing-with-data.html#cb80-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-18"><a href="r---dealing-with-data.html#cb80-18" aria-hidden="true" tabindex="-1"></a><span class="co"># We can remove NAs</span></span>
<span id="cb80-19"><a href="r---dealing-with-data.html#cb80-19" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb80-20"><a href="r---dealing-with-data.html#cb80-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Species))</span></code></pre></div>
</div>
<div id="arranging" class="section level3 hasAnchor" number="3.6.6">
<h3><span class="header-section-number">3.6.6</span> Arranging<a href="r---dealing-with-data.html#arranging" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We can <strong>arrange</strong> the dataframe as we wish.
We can sort by just 1 column or more.
In the latter case the second, third and so on variables will break the ties.
Missing values are sorted to the end.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="r---dealing-with-data.html#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># It defaults as ascending</span></span>
<span id="cb81-2"><a href="r---dealing-with-data.html#cb81-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb81-3"><a href="r---dealing-with-data.html#cb81-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Sepal.Length)</span>
<span id="cb81-4"><a href="r---dealing-with-data.html#cb81-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-5"><a href="r---dealing-with-data.html#cb81-5" aria-hidden="true" tabindex="-1"></a><span class="co"># We can make it descending:</span></span>
<span id="cb81-6"><a href="r---dealing-with-data.html#cb81-6" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb81-7"><a href="r---dealing-with-data.html#cb81-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Sepal.Length))</span></code></pre></div>
</div>
<div id="selecting" class="section level3 hasAnchor" number="3.6.7">
<h3><span class="header-section-number">3.6.7</span> Selecting<a href="r---dealing-with-data.html#selecting" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Another useful trick is to <strong>select</strong> columns.
With this command we can select the columns we want, or do not want.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="r---dealing-with-data.html#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Selecting Sepal.Lenght and Species columns</span></span>
<span id="cb82-2"><a href="r---dealing-with-data.html#cb82-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb82-3"><a href="r---dealing-with-data.html#cb82-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Sepal.Length, Species)</span>
<span id="cb82-4"><a href="r---dealing-with-data.html#cb82-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-5"><a href="r---dealing-with-data.html#cb82-5" aria-hidden="true" tabindex="-1"></a><span class="co"># We can also select multiple columns by saying from x to y:</span></span>
<span id="cb82-6"><a href="r---dealing-with-data.html#cb82-6" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb82-7"><a href="r---dealing-with-data.html#cb82-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Sepal.Length<span class="sc">:</span>Species)</span>
<span id="cb82-8"><a href="r---dealing-with-data.html#cb82-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-9"><a href="r---dealing-with-data.html#cb82-9" aria-hidden="true" tabindex="-1"></a><span class="co"># To select everything but:</span></span>
<span id="cb82-10"><a href="r---dealing-with-data.html#cb82-10" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb82-11"><a href="r---dealing-with-data.html#cb82-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(Sepal.Length, Species))</span></code></pre></div>
</div>
<div id="mutating" class="section level3 hasAnchor" number="3.6.8">
<h3><span class="header-section-number">3.6.8</span> Mutating<a href="r---dealing-with-data.html#mutating" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To create new columns (or modify existing ones), we can use <strong>mutate</strong>.
This a versatile command that allows you to do several things.
Here are a bunch of examples:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="r---dealing-with-data.html#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new column with just the string &quot;word&quot; on it.</span></span>
<span id="cb83-2"><a href="r---dealing-with-data.html#cb83-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb83-3"><a href="r---dealing-with-data.html#cb83-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">WordColumn =</span> <span class="st">&#39;word&#39;</span>)</span>
<span id="cb83-4"><a href="r---dealing-with-data.html#cb83-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-5"><a href="r---dealing-with-data.html#cb83-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a combination of two columns</span></span>
<span id="cb83-6"><a href="r---dealing-with-data.html#cb83-6" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb83-7"><a href="r---dealing-with-data.html#cb83-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TwoColsTogether =</span> <span class="fu">paste</span>(Species, WordColumn))</span>
<span id="cb83-8"><a href="r---dealing-with-data.html#cb83-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-9"><a href="r---dealing-with-data.html#cb83-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the sum of two columns</span></span>
<span id="cb83-10"><a href="r---dealing-with-data.html#cb83-10" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb83-11"><a href="r---dealing-with-data.html#cb83-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">SumOfCols =</span> Petal.Length <span class="sc">+</span> Petal.Width)</span>
<span id="cb83-12"><a href="r---dealing-with-data.html#cb83-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-13"><a href="r---dealing-with-data.html#cb83-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Among others</span></span>
<span id="cb83-14"><a href="r---dealing-with-data.html#cb83-14" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb83-15"><a href="r---dealing-with-data.html#cb83-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Times100 =</span> Petal.Length<span class="sc">*</span><span class="dv">100</span>)</span>
<span id="cb83-16"><a href="r---dealing-with-data.html#cb83-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-17"><a href="r---dealing-with-data.html#cb83-17" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb83-18"><a href="r---dealing-with-data.html#cb83-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">DividedBy2 =</span> Petal.Width<span class="sc">/</span><span class="dv">2</span>)</span></code></pre></div>
</div>
<div id="ifelse" class="section level3 hasAnchor" number="3.6.9">
<h3><span class="header-section-number">3.6.9</span> Ifelse<a href="r---dealing-with-data.html#ifelse" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>ifelse()</code> is a base function of R (not from tidyverse, altough you have <code>if_else()</code> from tidyverse which works and does exactly the same thing), but it fits quite well with its workflow.
Specifically it fits quite well with the <code>mutate()</code> command.
What it basically says is: <code>if THIS_CONDITION_IS_MET then DO_CASE_1 otherwise DO_CASE_2</code>.
The function will look like this: <code>ifelse(THIS_CONDITION_IS_MET, DO_CASE_1, DO_CASE_2)</code>.
Lets look at some examples below.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="r---dealing-with-data.html#cb84-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> iris</span>
<span id="cb84-2"><a href="r---dealing-with-data.html#cb84-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-3"><a href="r---dealing-with-data.html#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Replacing for just 1 condition.</span></span>
<span id="cb84-4"><a href="r---dealing-with-data.html#cb84-4" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb84-5"><a href="r---dealing-with-data.html#cb84-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">SpeciesAlt =</span> <span class="fu">ifelse</span>(Species <span class="sc">==</span> <span class="st">&#39;setosa&#39;</span>, <span class="st">&#39;Specie1&#39;</span>, Species)) <span class="sc">%&gt;%</span> </span>
<span id="cb84-6"><a href="r---dealing-with-data.html#cb84-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()  <span class="co"># just to show the first 5 rows for the purpose of demonstration.</span></span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species SpeciesAlt
## 1          5.1         3.5          1.4         0.2  setosa    Specie1
## 2          4.9         3.0          1.4         0.2  setosa    Specie1
## 3          4.7         3.2          1.3         0.2  setosa    Specie1
## 4          4.6         3.1          1.5         0.2  setosa    Specie1
## 5          5.0         3.6          1.4         0.2  setosa    Specie1
## 6          5.4         3.9          1.7         0.4  setosa    Specie1</code></pre>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="r---dealing-with-data.html#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Replacing for 3 conditions (Gets a bit chaotic)</span></span>
<span id="cb86-2"><a href="r---dealing-with-data.html#cb86-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb86-3"><a href="r---dealing-with-data.html#cb86-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">SpeciesAlt =</span> <span class="fu">ifelse</span>(Species <span class="sc">==</span> <span class="st">&#39;setosa&#39;</span>, <span class="st">&#39;Specie1&#39;</span>, </span>
<span id="cb86-4"><a href="r---dealing-with-data.html#cb86-4" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">ifelse</span>(Species <span class="sc">==</span> <span class="st">&#39;versicolor&#39;</span>, <span class="st">&#39;Specie2&#39;</span>,</span>
<span id="cb86-5"><a href="r---dealing-with-data.html#cb86-5" aria-hidden="true" tabindex="-1"></a>                                    <span class="fu">ifelse</span>(Species <span class="sc">==</span> <span class="st">&#39;virginica&#39;</span>, <span class="st">&#39;Specie3&#39;</span>, Species)))) <span class="sc">%&gt;%</span> </span>
<span id="cb86-6"><a href="r---dealing-with-data.html#cb86-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()  <span class="co"># just to show the first 5 rows for the purpose of demonstration.</span></span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species SpeciesAlt
## 1          5.1         3.5          1.4         0.2  setosa    Specie1
## 2          4.9         3.0          1.4         0.2  setosa    Specie1
## 3          4.7         3.2          1.3         0.2  setosa    Specie1
## 4          4.6         3.1          1.5         0.2  setosa    Specie1
## 5          5.0         3.6          1.4         0.2  setosa    Specie1
## 6          5.4         3.9          1.7         0.4  setosa    Specie1</code></pre>
<p>As you can see, for changing just 1 Species, its quite easy and practical.
But for more than say 2 it starts to get very confusing.</p>
<p>As a simpler alternative, when you deal with plenty of cases, you should use <code>recode()</code>.</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="r---dealing-with-data.html#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Recoding all 3 cases</span></span>
<span id="cb88-2"><a href="r---dealing-with-data.html#cb88-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb88-3"><a href="r---dealing-with-data.html#cb88-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">SpeciesAlt =</span> <span class="fu">recode</span>(Species, <span class="at">setosa =</span> <span class="st">&quot;Specie1&quot;</span>,</span>
<span id="cb88-4"><a href="r---dealing-with-data.html#cb88-4" aria-hidden="true" tabindex="-1"></a>                             <span class="at">versicolor =</span> <span class="st">&quot;Specie2&quot;</span>, </span>
<span id="cb88-5"><a href="r---dealing-with-data.html#cb88-5" aria-hidden="true" tabindex="-1"></a>                             <span class="at">virginica =</span> <span class="st">&#39;Specie3&#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb88-6"><a href="r---dealing-with-data.html#cb88-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()  <span class="co"># just to show the first 5 rows for the purpose of demonstration.</span></span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species SpeciesAlt
## 1          5.1         3.5          1.4         0.2  setosa    Specie1
## 2          4.9         3.0          1.4         0.2  setosa    Specie1
## 3          4.7         3.2          1.3         0.2  setosa    Specie1
## 4          4.6         3.1          1.5         0.2  setosa    Specie1
## 5          5.0         3.6          1.4         0.2  setosa    Specie1
## 6          5.4         3.9          1.7         0.4  setosa    Specie1</code></pre>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="r---dealing-with-data.html#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Recoding just 2 and giving all the rest the label &quot;others&quot;</span></span>
<span id="cb90-2"><a href="r---dealing-with-data.html#cb90-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb90-3"><a href="r---dealing-with-data.html#cb90-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">SpeciesAlt =</span> <span class="fu">recode</span>(Species, <span class="at">setosa =</span> <span class="st">&quot;Specie1&quot;</span>,</span>
<span id="cb90-4"><a href="r---dealing-with-data.html#cb90-4" aria-hidden="true" tabindex="-1"></a>                             <span class="at">versicolor =</span> <span class="st">&quot;Specie2&quot;</span>, <span class="at">.default =</span> <span class="st">&#39;others&#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb90-5"><a href="r---dealing-with-data.html#cb90-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()  <span class="co"># just to show the first 5 rows for the purpose of demonstration.</span></span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species SpeciesAlt
## 1          5.1         3.5          1.4         0.2  setosa    Specie1
## 2          4.9         3.0          1.4         0.2  setosa    Specie1
## 3          4.7         3.2          1.3         0.2  setosa    Specie1
## 4          4.6         3.1          1.5         0.2  setosa    Specie1
## 5          5.0         3.6          1.4         0.2  setosa    Specie1
## 6          5.4         3.9          1.7         0.4  setosa    Specie1</code></pre>
<p>As an alternative (since it allows you to make more elaborate conditionals), you can use <code>case_when()</code>.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="r---dealing-with-data.html#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Recoding all 3 cases</span></span>
<span id="cb92-2"><a href="r---dealing-with-data.html#cb92-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb92-3"><a href="r---dealing-with-data.html#cb92-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">SpeciesAlt =</span> <span class="fu">case_when</span>(</span>
<span id="cb92-4"><a href="r---dealing-with-data.html#cb92-4" aria-hidden="true" tabindex="-1"></a>    Species <span class="sc">==</span> <span class="st">&#39;setosa&#39;</span> <span class="sc">~</span> <span class="st">&#39;Specie1&#39;</span>,</span>
<span id="cb92-5"><a href="r---dealing-with-data.html#cb92-5" aria-hidden="true" tabindex="-1"></a>    Species <span class="sc">==</span> <span class="st">&#39;versicolor&#39;</span> <span class="sc">~</span> <span class="st">&#39;Specie2&#39;</span>,</span>
<span id="cb92-6"><a href="r---dealing-with-data.html#cb92-6" aria-hidden="true" tabindex="-1"></a>    Species <span class="sc">==</span> <span class="st">&#39;virginica&#39;</span> <span class="sc">~</span> <span class="st">&#39;Specie3&#39;</span></span>
<span id="cb92-7"><a href="r---dealing-with-data.html#cb92-7" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span> </span>
<span id="cb92-8"><a href="r---dealing-with-data.html#cb92-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()  <span class="co"># just to show the first 5 rows for the purpose of demonstration.</span></span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species SpeciesAlt
## 1          5.1         3.5          1.4         0.2  setosa    Specie1
## 2          4.9         3.0          1.4         0.2  setosa    Specie1
## 3          4.7         3.2          1.3         0.2  setosa    Specie1
## 4          4.6         3.1          1.5         0.2  setosa    Specie1
## 5          5.0         3.6          1.4         0.2  setosa    Specie1
## 6          5.4         3.9          1.7         0.4  setosa    Specie1</code></pre>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="r---dealing-with-data.html#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Recoding just 2 and giving all the rest the label &quot;others&quot;</span></span>
<span id="cb94-2"><a href="r---dealing-with-data.html#cb94-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb94-3"><a href="r---dealing-with-data.html#cb94-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">SpeciesAlt =</span> <span class="fu">case_when</span>(</span>
<span id="cb94-4"><a href="r---dealing-with-data.html#cb94-4" aria-hidden="true" tabindex="-1"></a>    Species <span class="sc">==</span> <span class="st">&#39;setosa&#39;</span> <span class="sc">~</span> <span class="st">&#39;Specie1&#39;</span>,</span>
<span id="cb94-5"><a href="r---dealing-with-data.html#cb94-5" aria-hidden="true" tabindex="-1"></a>    Species <span class="sc">==</span> <span class="st">&#39;versicolor&#39;</span> <span class="sc">~</span> <span class="st">&#39;Specie2&#39;</span>,</span>
<span id="cb94-6"><a href="r---dealing-with-data.html#cb94-6" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&#39;others&#39;</span></span>
<span id="cb94-7"><a href="r---dealing-with-data.html#cb94-7" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span> </span>
<span id="cb94-8"><a href="r---dealing-with-data.html#cb94-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()  <span class="co"># just to show the first 5 rows for the purpose of demonstration.</span></span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species SpeciesAlt
## 1          5.1         3.5          1.4         0.2  setosa    Specie1
## 2          4.9         3.0          1.4         0.2  setosa    Specie1
## 3          4.7         3.2          1.3         0.2  setosa    Specie1
## 4          4.6         3.1          1.5         0.2  setosa    Specie1
## 5          5.0         3.6          1.4         0.2  setosa    Specie1
## 6          5.4         3.9          1.7         0.4  setosa    Specie1</code></pre>
</div>
<div id="grouping-and-summarizing" class="section level3 hasAnchor" number="3.6.10">
<h3><span class="header-section-number">3.6.10</span> Grouping and Summarizing<a href="r---dealing-with-data.html#grouping-and-summarizing" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>group_by()</code> and <code>summarise()</code>, are two very important functions from <code>dplyr</code>.
The first one, in itself, does not do anything.
It is meant to be followed by the latter.</p>
<p>In the <code>group_by(variables)</code> command you tell R on which variables you want to group your data by specifying the column that contains this (or these) variable(s).
In the example below the only column that makes sense grouping by is <code>Species</code>.
By telling R to group with species, the next command <code>summarise()</code> give a summary output for each category of the <code>Species</code> column.
Lets look at the examples that follow.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="r---dealing-with-data.html#cb96-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> iris</span>
<span id="cb96-2"><a href="r---dealing-with-data.html#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarising mean Sepal.length by species</span></span>
<span id="cb96-3"><a href="r---dealing-with-data.html#cb96-3" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb96-4"><a href="r---dealing-with-data.html#cb96-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span>  <span class="co"># Grouping by this variable</span></span>
<span id="cb96-5"><a href="r---dealing-with-data.html#cb96-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean_By_Species =</span> <span class="fu">mean</span>(Sepal.Length)) </span></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   Species    Mean_By_Species
##   &lt;fct&gt;                &lt;dbl&gt;
## 1 setosa                5.01
## 2 versicolor            5.94
## 3 virginica             6.59</code></pre>
<p>You can group by more than one factor and ask for other summaries, such as median, sd, and other basic operations.
For instance:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="r---dealing-with-data.html#cb98-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb98-2"><a href="r---dealing-with-data.html#cb98-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span> </span>
<span id="cb98-3"><a href="r---dealing-with-data.html#cb98-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>())  <span class="co"># Gives you the number of entries in each group</span></span></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   Species    count
##   &lt;fct&gt;      &lt;int&gt;
## 1 setosa        50
## 2 versicolor    50
## 3 virginica     50</code></pre>
<p>You can then build operations on top of your summaries (like mutations or plots)</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="r---dealing-with-data.html#cb100-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb100-2"><a href="r---dealing-with-data.html#cb100-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span> </span>
<span id="cb100-3"><a href="r---dealing-with-data.html#cb100-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean_Length =</span> <span class="fu">mean</span>(Sepal.Length)) <span class="sc">%&gt;%</span> </span>
<span id="cb100-4"><a href="r---dealing-with-data.html#cb100-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(Species, Mean_Length)) <span class="sc">+</span> </span>
<span id="cb100-5"><a href="r---dealing-with-data.html#cb100-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code></pre></div>
<p><img src="using_r_data_files/figure-html/unnamed-chunk-48-1.png" width="672" /></p>
</div>
<div id="changing-format-widelong" class="section level3 hasAnchor" number="3.6.11">
<h3><span class="header-section-number">3.6.11</span> Changing Format (Wide/Long)<a href="r---dealing-with-data.html#changing-format-widelong" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are two types of ways that the data can be structured in.
These ways are important for many reasons, not just for the way they look.
Certain analysis, commands or functions used in R prefer (or rather mandate) that the data is in a specific format.
This format can be either <strong><em>wide</em></strong> or <strong><em>long</em></strong>.</p>
<p>In the wide format each each variable level has a column.
Lets say we are looking at how people rate pictures of happy, angry and neutral people in terms of good looks on a rating of 0-10.
If we were to have the data in a wide format, we would have a data frame with (aside from columns related to the ID of the participant and so forth) 3 columns.
One, labeled “Ratings_Happy” for instance, that would have all the ratings given by each participant to the happy faces, another with the ratings given to the angry faces and another to the neutral faces.
It should look something like this:</p>
<p>However, if we were to have the data in long format, we would instead have just have two columns (aside from the Participant ID and other information columns you might want).
One column, labeled “Facial_Expression” for instance, would have either “Happy”, “Angry” or “Neutral”.
The other column, labeled “Rating”, would have the rating given to the face.
Since all of the participants rated every condition, each participant would have 3 entries in the dataframe (hence making it longer).
It should look something like this:</p>
<p>This is quite simple to do actually.
The commands we will be using are <code>pivot_wider</code> and <code>pivot_longer</code> and they are quite intuitive.
Lets work through this example.
Lets first say we want to transform data frame from <em>long</em> to <em>wide</em>.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="r---dealing-with-data.html#cb101-1" aria-hidden="true" tabindex="-1"></a>df_long <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Participant_ID =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,<span class="at">each=</span><span class="dv">3</span>),</span>
<span id="cb101-2"><a href="r---dealing-with-data.html#cb101-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Facial_Expression =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&#39;Happy&#39;</span>,<span class="st">&#39;Angry&#39;</span>,<span class="st">&#39;Neutral&#39;</span>), <span class="dv">5</span>),</span>
<span id="cb101-3"><a href="r---dealing-with-data.html#cb101-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Ratings =</span> <span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">6</span>,<span class="dv">4</span>,<span class="dv">7</span>,<span class="dv">6</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">6</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">5</span>))</span>
<span id="cb101-4"><a href="r---dealing-with-data.html#cb101-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-5"><a href="r---dealing-with-data.html#cb101-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Transforming</span></span>
<span id="cb101-6"><a href="r---dealing-with-data.html#cb101-6" aria-hidden="true" tabindex="-1"></a>df_wide <span class="ot">&lt;-</span> df_long <span class="sc">%&gt;%</span> </span>
<span id="cb101-7"><a href="r---dealing-with-data.html#cb101-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> Participant_ID,  <span class="co"># Condition that identifies the grouping (ID) factor of each entry.</span></span>
<span id="cb101-8"><a href="r---dealing-with-data.html#cb101-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">names_from =</span> Facial_Expression,  <span class="co"># Where to find our future column names</span></span>
<span id="cb101-9"><a href="r---dealing-with-data.html#cb101-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> Ratings)   <span class="co"># Where are the values that will fill those columns </span></span>
<span id="cb101-10"><a href="r---dealing-with-data.html#cb101-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-11"><a href="r---dealing-with-data.html#cb101-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-12"><a href="r---dealing-with-data.html#cb101-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_wide)</span></code></pre></div>
<pre><code>## # A tibble: 5 x 4
##   Participant_ID Happy Angry Neutral
##            &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
## 1              1     6     4       2
## 2              2     6     4       7
## 3              3     6     5       7
## 4              4     5     8       6
## 5              5     5     8       5</code></pre>
<p>Now doing the reverse, that is, turning the data from the current <em>wide</em> format and making it <em>longer</em> again.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="r---dealing-with-data.html#cb103-1" aria-hidden="true" tabindex="-1"></a>df_long <span class="ot">&lt;-</span> df_wide <span class="sc">%&gt;%</span> </span>
<span id="cb103-2"><a href="r---dealing-with-data.html#cb103-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">&#39;Happy&#39;</span>,<span class="st">&#39;Angry&#39;</span>,<span class="st">&#39;Neutral&#39;</span>),  <span class="co"># Columns to turn into long</span></span>
<span id="cb103-3"><a href="r---dealing-with-data.html#cb103-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&#39;Facial_Expression&#39;</span>,  <span class="co"># What will the column with the labels be called</span></span>
<span id="cb103-4"><a href="r---dealing-with-data.html#cb103-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&#39;Ratings&#39;</span>)  <span class="co"># What will the column with the values be called</span></span>
<span id="cb103-5"><a href="r---dealing-with-data.html#cb103-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-6"><a href="r---dealing-with-data.html#cb103-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_long)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   Participant_ID Facial_Expression Ratings
##            &lt;int&gt; &lt;chr&gt;               &lt;dbl&gt;
## 1              1 Happy                   6
## 2              1 Angry                   4
## 3              1 Neutral                 2
## 4              2 Happy                   6
## 5              2 Angry                   4
## 6              2 Neutral                 7</code></pre>
</div>
<div id="missing-values" class="section level3 hasAnchor" number="3.6.12">
<h3><span class="header-section-number">3.6.12</span> Missing Values<a href="r---dealing-with-data.html#missing-values" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We have several ways of dealing with missing values <code>NA</code> (which, if you forget already, means “Not Available”).
We can remove them, or omit them, depending on the situation.
The important thing to note is that you should be aware if your dataframe contains <code>NA</code> values, since these might provide misleading results, or simple provide error messages.
For instance, if you ask the mean of a column that contains just one <code>NA</code>, the result will be <code>NA</code>.
You can either specify <code>na.rm = TRUE</code> on the command (if the specific command allows you to do so), or just remove the <code>NA</code> values prior to running the command.</p>
<p>First lets learn how to check for missing values.
There are several ways.
Here are a few</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="r---dealing-with-data.html#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">is.na</span>(df))  <span class="co"># tells you how many data points are NAs (TRUE) or not (FALSE) in the whole dataframe.</span></span></code></pre></div>
<pre><code>## 
## FALSE 
##   750</code></pre>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="r---dealing-with-data.html#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colSums</span>(<span class="fu">is.na</span>(df))  <span class="co"># tells you more specifically the number of NAs per column in your dataframe</span></span></code></pre></div>
<pre><code>## Sepal.Length  Sepal.Width Petal.Length  Petal.Width      Species 
##            0            0            0            0            0</code></pre>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="r---dealing-with-data.html#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(<span class="fu">colSums</span>(<span class="fu">is.na</span>(df))<span class="sc">&gt;</span><span class="dv">0</span>)  <span class="co"># just tells you exactly the ones that have NAs (and how many)</span></span></code></pre></div>
<pre><code>## named integer(0)</code></pre>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="r---dealing-with-data.html#cb111-1" aria-hidden="true" tabindex="-1"></a>df[<span class="sc">!</span><span class="fu">complete.cases</span>(df),]  <span class="co"># tells you the whole row that has an NA value in it.</span></span></code></pre></div>
<pre><code>## [1] Sepal.Length Sepal.Width  Petal.Length Petal.Width  Species     
## &lt;0 rows&gt; (or 0-length row.names)</code></pre>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="r---dealing-with-data.html#cb113-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>Sepal.Length <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(df<span class="sc">$</span>Sepal.Length)</span>
<span id="cb113-2"><a href="r---dealing-with-data.html#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Asking a mean with NA values</span></span>
<span id="cb113-3"><a href="r---dealing-with-data.html#cb113-3" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb113-4"><a href="r---dealing-with-data.html#cb113-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(Sepal.Length))</span></code></pre></div>
<pre><code>##   Mean
## 1   NA</code></pre>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="r---dealing-with-data.html#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Removing NAs when asking the mean</span></span>
<span id="cb115-2"><a href="r---dealing-with-data.html#cb115-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb115-3"><a href="r---dealing-with-data.html#cb115-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(Sepal.Length, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>##       Mean
## 1 5.843333</code></pre>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="r---dealing-with-data.html#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Removing NAs then asking for the mean</span></span>
<span id="cb117-2"><a href="r---dealing-with-data.html#cb117-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb117-3"><a href="r---dealing-with-data.html#cb117-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Sepal.Length)) <span class="sc">%&gt;%</span> </span>
<span id="cb117-4"><a href="r---dealing-with-data.html#cb117-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(Sepal.Length))</span></code></pre></div>
<pre><code>##       Mean
## 1 5.843333</code></pre>
<p>We can remove these NA rows or substitute them.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="r---dealing-with-data.html#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Replacing NA with 0</span></span>
<span id="cb119-2"><a href="r---dealing-with-data.html#cb119-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb119-3"><a href="r---dealing-with-data.html#cb119-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Sepal.Length =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(Sepal.Length), <span class="dv">0</span>, Sepal.Length))</span>
<span id="cb119-4"><a href="r---dealing-with-data.html#cb119-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-5"><a href="r---dealing-with-data.html#cb119-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Removing</span></span>
<span id="cb119-6"><a href="r---dealing-with-data.html#cb119-6" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb119-7"><a href="r---dealing-with-data.html#cb119-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Sepal.Length))</span>
<span id="cb119-8"><a href="r---dealing-with-data.html#cb119-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-9"><a href="r---dealing-with-data.html#cb119-9" aria-hidden="true" tabindex="-1"></a><span class="co"># or remove all NA rows</span></span>
<span id="cb119-10"><a href="r---dealing-with-data.html#cb119-10" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(df)</span></code></pre></div>
</div>
<div id="counts" class="section level3 hasAnchor" number="3.6.13">
<h3><span class="header-section-number">3.6.13</span> Counts<a href="r---dealing-with-data.html#counts" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Already mentioned above.
Gives you the number of entries.</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="r---dealing-with-data.html#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Gives you the number per category of Species</span></span>
<span id="cb120-2"><a href="r---dealing-with-data.html#cb120-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb120-3"><a href="r---dealing-with-data.html#cb120-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span> </span>
<span id="cb120-4"><a href="r---dealing-with-data.html#cb120-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   Species    count
##   &lt;fct&gt;      &lt;int&gt;
## 1 setosa        51
## 2 versicolor    50
## 3 virginica     50</code></pre>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="r---dealing-with-data.html#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Counts the total number of entries</span></span>
<span id="cb122-2"><a href="r---dealing-with-data.html#cb122-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb122-3"><a href="r---dealing-with-data.html#cb122-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Species) <span class="sc">%&gt;%</span> </span>
<span id="cb122-4"><a href="r---dealing-with-data.html#cb122-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>()</span></code></pre></div>
<pre><code>##     n
## 1 151</code></pre>
</div>
<div id="ungrouping" class="section level3 hasAnchor" number="3.6.14">
<h3><span class="header-section-number">3.6.14</span> Ungrouping<a href="r---dealing-with-data.html#ungrouping" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Lastly, you can use <code>ungroup()</code> in a pipe to remove the grouping that you’ve did, if you want to execute commands over the “ungrouped” data.
This is very rarely used, at least by me.
However, in certain cases it might be useful.
Here’s an example, where I want to center the variable <code>Sepal.Length</code>, but I want to do so considering the species it belongs to.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="r---dealing-with-data.html#cb124-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb124-2"><a href="r---dealing-with-data.html#cb124-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span>  <span class="co"># grouping by species</span></span>
<span id="cb124-3"><a href="r---dealing-with-data.html#cb124-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Sepal.Width =</span> <span class="fu">as.numeric</span>(Sepal.Width),</span>
<span id="cb124-4"><a href="r---dealing-with-data.html#cb124-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">Speal.Length =</span> <span class="fu">as.numeric</span>(Sepal.Length)) <span class="sc">%&gt;%</span> </span>
<span id="cb124-5"><a href="r---dealing-with-data.html#cb124-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">MeanPerSpecie =</span> <span class="fu">mean</span>(Sepal.Width),  <span class="co"># creates mean by species</span></span>
<span id="cb124-6"><a href="r---dealing-with-data.html#cb124-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">CenteredWidth =</span> Sepal.Width <span class="sc">-</span> <span class="fu">mean</span>(Sepal.Width)) <span class="sc">%&gt;%</span>   <span class="co"># subtracts the mean (of the corresponding specie).</span></span>
<span id="cb124-7"><a href="r---dealing-with-data.html#cb124-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Species, Sepal.Width, MeanPerSpecie, CenteredWidth) <span class="sc">%&gt;%</span> </span>
<span id="cb124-8"><a href="r---dealing-with-data.html#cb124-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()  <span class="co"># remove grouping in case i want to do more mutates, but now NOT considering the groups of species.</span></span></code></pre></div>
<pre><code>## # A tibble: 151 x 4
##    Species Sepal.Width MeanPerSpecie CenteredWidth
##    &lt;fct&gt;         &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;
##  1 setosa          3.5          3.40       0.0980 
##  2 setosa          3            3.40      -0.402  
##  3 setosa          3.2          3.40      -0.202  
##  4 setosa          3.1          3.40      -0.302  
##  5 setosa          3.6          3.40       0.198  
##  6 setosa          3.9          3.40       0.498  
##  7 setosa          3.4          3.40      -0.00196
##  8 setosa          3.4          3.40      -0.00196
##  9 setosa          2.9          3.40      -0.502  
## 10 setosa          3.1          3.40      -0.302  
## # ... with 141 more rows</code></pre>
</div>
<div id="stringscharacters" class="section level3 hasAnchor" number="3.6.15">
<h3><span class="header-section-number">3.6.15</span> Strings/Characters<a href="r---dealing-with-data.html#stringscharacters" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sometimes we want to work on strings/characters.
We may want to replace strings, alter them in some way, split them into different columns, etc.
So here I will introduce a few examples of what we can do to strings in R.</p>
<p>For instance lets say we want to find a pattern of a string in a column of a dataframe in R.
For that we will use the grep family of functions which is built-in in R.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="r---dealing-with-data.html#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We can either find the rows on which this pattern appear</span></span>
<span id="cb126-2"><a href="r---dealing-with-data.html#cb126-2" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&#39;set&#39;</span>, df<span class="sc">$</span>Species)</span>
<span id="cb126-3"><a href="r---dealing-with-data.html#cb126-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-4"><a href="r---dealing-with-data.html#cb126-4" aria-hidden="true" tabindex="-1"></a><span class="co"># We can pull the string in which this pattern appears</span></span>
<span id="cb126-5"><a href="r---dealing-with-data.html#cb126-5" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&#39;set&#39;</span>, df<span class="sc">$</span>Species, <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb126-6"><a href="r---dealing-with-data.html#cb126-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-7"><a href="r---dealing-with-data.html#cb126-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Or return a TRUE or FALSE per row</span></span>
<span id="cb126-8"><a href="r---dealing-with-data.html#cb126-8" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">&#39;set&#39;</span>, df<span class="sc">$</span>Species)  <span class="co"># the &quot;l&quot; after grep stands for logic (i.e., TRUE/FALSE)</span></span>
<span id="cb126-9"><a href="r---dealing-with-data.html#cb126-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-10"><a href="r---dealing-with-data.html#cb126-10" aria-hidden="true" tabindex="-1"></a><span class="co"># We can find how many entries with that pattern are present</span></span>
<span id="cb126-11"><a href="r---dealing-with-data.html#cb126-11" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">grepl</span>(<span class="st">&#39;set&#39;</span>, df<span class="sc">$</span>Species))</span>
<span id="cb126-12"><a href="r---dealing-with-data.html#cb126-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-13"><a href="r---dealing-with-data.html#cb126-13" aria-hidden="true" tabindex="-1"></a><span class="co"># We can substitute a pattern directly in the dataframe</span></span>
<span id="cb126-14"><a href="r---dealing-with-data.html#cb126-14" aria-hidden="true" tabindex="-1"></a><span class="fu">sub</span>(<span class="st">&#39;set&#39;</span>, <span class="st">&#39;Set&#39;</span>, df<span class="sc">$</span>Species)</span></code></pre></div>
<p>There are additional commands within this family of functions that will allow you to extract, find or substitute exactly what you want and obeying each condition you might want.
For that just look into: <a href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/grep" class="uri">https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/grep</a></p>
<p>Another relevant package used to deal with strings is <code>stringr</code>, which comes with the tidyverse.
Here I’ll showing some brief examples of what you can do with it, although you can do much more, and you should check its website: <a href="https://stringr.tidyverse.org/" class="uri">https://stringr.tidyverse.org/</a></p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="r---dealing-with-data.html#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Just preparing the df</span></span>
<span id="cb127-2"><a href="r---dealing-with-data.html#cb127-2" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> mtcars</span>
<span id="cb127-3"><a href="r---dealing-with-data.html#cb127-3" aria-hidden="true" tabindex="-1"></a>df2<span class="sc">$</span>CarName <span class="ot">&lt;-</span> <span class="fu">rownames</span>(mtcars)</span>
<span id="cb127-4"><a href="r---dealing-with-data.html#cb127-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(df2) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb127-5"><a href="r---dealing-with-data.html#cb127-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-6"><a href="r---dealing-with-data.html#cb127-6" aria-hidden="true" tabindex="-1"></a><span class="co"># StringR</span></span>
<span id="cb127-7"><a href="r---dealing-with-data.html#cb127-7" aria-hidden="true" tabindex="-1"></a>df2 <span class="sc">%&gt;%</span> </span>
<span id="cb127-8"><a href="r---dealing-with-data.html#cb127-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CarName =</span> <span class="fu">str_replace</span>(CarName, <span class="st">&#39;Merc&#39;</span>, <span class="st">&#39;Mercedes&#39;</span>))</span></code></pre></div>
<pre><code>##     mpg cyl  disp  hp drat    wt  qsec vs am gear carb             CarName
## 1  21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4           Mazda RX4
## 2  21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4       Mazda RX4 Wag
## 3  22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1          Datsun 710
## 4  21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1      Hornet 4 Drive
## 5  18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2   Hornet Sportabout
## 6  18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1             Valiant
## 7  14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4          Duster 360
## 8  24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2       Mercedes 240D
## 9  22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2        Mercedes 230
## 10 19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4        Mercedes 280
## 11 17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4       Mercedes 280C
## 12 16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3      Mercedes 450SE
## 13 17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3      Mercedes 450SL
## 14 15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3     Mercedes 450SLC
## 15 10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4  Cadillac Fleetwood
## 16 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4 Lincoln Continental
## 17 14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4   Chrysler Imperial
## 18 32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1            Fiat 128
## 19 30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2         Honda Civic
## 20 33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1      Toyota Corolla
## 21 21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1       Toyota Corona
## 22 15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2    Dodge Challenger
## 23 15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2         AMC Javelin
## 24 13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4          Camaro Z28
## 25 19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2    Pontiac Firebird
## 26 27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1           Fiat X1-9
## 27 26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2       Porsche 914-2
## 28 30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2        Lotus Europa
## 29 15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4      Ford Pantera L
## 30 19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6        Ferrari Dino
## 31 15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8       Maserati Bora
## 32 21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2          Volvo 142E</code></pre>
</div>
<div id="splits" class="section level3 hasAnchor" number="3.6.16">
<h3><span class="header-section-number">3.6.16</span> Splits<a href="r---dealing-with-data.html#splits" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We can also split a dataframe into multiple ones, by using <code>group_split()</code> or <code>split()</code>.
They work and do the same.
The only difference is that the former comes with the tidyverse and also just works a bit better with the pipes.
For instance, lets split the dataframe by species.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="r---dealing-with-data.html#cb129-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb129-2"><a href="r---dealing-with-data.html#cb129-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_split</span>(Species)</span></code></pre></div>
<pre><code>## &lt;list_of&lt;
##   tbl_df&lt;
##     Sepal.Length: double
##     Sepal.Width : character
##     Petal.Length: character
##     Petal.Width : character
##     Species     : factor&lt;fb977&gt;
##   &gt;
## &gt;[3]&gt;
## [[1]]
## # A tibble: 51 x 5
##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
##           &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;       &lt;fct&gt;  
##  1          5.1 3.5         1.4          0.2         setosa 
##  2          4.9 3           1.4          0.2         setosa 
##  3          4.7 3.2         1.3          0.2         setosa 
##  4          4.6 3.1         1.5          0.2         setosa 
##  5          5   3.6         1.4          0.2         setosa 
##  6          5.4 3.9         1.7          0.4         setosa 
##  7          4.6 3.4         1.4          0.3         setosa 
##  8          5   3.4         1.5          0.2         setosa 
##  9          4.4 2.9         1.4          0.2         setosa 
## 10          4.9 3.1         1.5          0.1         setosa 
## # ... with 41 more rows
## 
## [[2]]
## # A tibble: 50 x 5
##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species   
##           &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;       &lt;fct&gt;     
##  1          7   3.2         4.7          1.4         versicolor
##  2          6.4 3.2         4.5          1.5         versicolor
##  3          6.9 3.1         4.9          1.5         versicolor
##  4          5.5 2.3         4            1.3         versicolor
##  5          6.5 2.8         4.6          1.5         versicolor
##  6          5.7 2.8         4.5          1.3         versicolor
##  7          6.3 3.3         4.7          1.6         versicolor
##  8          4.9 2.4         3.3          1           versicolor
##  9          6.6 2.9         4.6          1.3         versicolor
## 10          5.2 2.7         3.9          1.4         versicolor
## # ... with 40 more rows
## 
## [[3]]
## # A tibble: 50 x 5
##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species  
##           &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;       &lt;fct&gt;    
##  1          6.3 3.3         6            2.5         virginica
##  2          5.8 2.7         5.1          1.9         virginica
##  3          7.1 3           5.9          2.1         virginica
##  4          6.3 2.9         5.6          1.8         virginica
##  5          6.5 3           5.8          2.2         virginica
##  6          7.6 3           6.6          2.1         virginica
##  7          4.9 2.5         4.5          1.7         virginica
##  8          7.3 2.9         6.3          1.8         virginica
##  9          6.7 2.5         5.8          1.8         virginica
## 10          7.2 3.6         6.1          2.5         virginica
## # ... with 40 more rows</code></pre>
</div>
<div id="mapping" class="section level3 hasAnchor" number="3.6.17">
<h3><span class="header-section-number">3.6.17</span> Mapping<a href="r---dealing-with-data.html#mapping" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Mapping is quite useful.
It allows you to map a function to a certain output.
For instance, if you first need to split the dataframe, then perform a correlation test, you can easily do this altogether.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="r---dealing-with-data.html#cb131-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb131-2"><a href="r---dealing-with-data.html#cb131-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Sepal.Length =</span> <span class="fu">as.numeric</span>(Sepal.Length),  <span class="co"># turning these columns to numeric</span></span>
<span id="cb131-3"><a href="r---dealing-with-data.html#cb131-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">Sepal.Width =</span> <span class="fu">as.numeric</span>(Sepal.Width)) <span class="sc">%&gt;%</span> </span>
<span id="cb131-4"><a href="r---dealing-with-data.html#cb131-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_split</span>(Species) <span class="sc">%&gt;%</span>  <span class="co"># split by pictures</span></span>
<span id="cb131-5"><a href="r---dealing-with-data.html#cb131-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span> <span class="fu">cor.test</span>(.<span class="sc">$</span>Sepal.Length, .<span class="sc">$</span>Sepal.Width))</span></code></pre></div>
<pre><code>## [[1]]
## 
##  Pearson&#39;s product-moment correlation
## 
## data:  .$Sepal.Length and .$Sepal.Width
## t = 6.7473, df = 49, p-value = 1.634e-08
## alternative hypothesis: true correlation is not equal to 0
## 95 percent confidence interval:
##  0.5173516 0.8139116
## sample estimates:
##       cor 
## 0.6939905 
## 
## 
## [[2]]
## 
##  Pearson&#39;s product-moment correlation
## 
## data:  .$Sepal.Length and .$Sepal.Width
## t = 4.2839, df = 48, p-value = 8.772e-05
## alternative hypothesis: true correlation is not equal to 0
## 95 percent confidence interval:
##  0.2900175 0.7015599
## sample estimates:
##       cor 
## 0.5259107 
## 
## 
## [[3]]
## 
##  Pearson&#39;s product-moment correlation
## 
## data:  .$Sepal.Length and .$Sepal.Width
## t = 3.5619, df = 48, p-value = 0.0008435
## alternative hypothesis: true correlation is not equal to 0
## 95 percent confidence interval:
##  0.2049657 0.6525292
## sample estimates:
##       cor 
## 0.4572278</code></pre>
<p>We can see it more clearly in this dataframe.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="r---dealing-with-data.html#cb133-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span></span>
<span id="cb133-2"><a href="r---dealing-with-data.html#cb133-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">split</span>(.<span class="sc">$</span>cyl) <span class="sc">%&gt;%</span></span>
<span id="cb133-3"><a href="r---dealing-with-data.html#cb133-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt, <span class="at">data =</span> .x)) <span class="sc">%&gt;%</span></span>
<span id="cb133-4"><a href="r---dealing-with-data.html#cb133-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dfr</span>(<span class="sc">~</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(<span class="fu">as.matrix</span>(<span class="fu">coef</span>(.)))))  <span class="co"># returns the result in a dataframe format</span></span></code></pre></div>
<pre><code>##   (Intercept)        wt
## 1    39.57120 -5.647025
## 2    28.40884 -2.780106
## 3    23.86803 -2.192438</code></pre>
</div>
</div>
<div id="end" class="section level2 hasAnchor" number="3.7">
<h2><span class="header-section-number">3.7</span> End<a href="r---dealing-with-data.html#end" class="anchor-section" aria-label="Anchor link to header"></a></h2>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="basic-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="exploratory-data-analysis-eda.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/02-Chapter2.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["using_r_data.pdf", "using_r_data.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
