<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 R - Basics and Tidyverse | Usefulness of R for Psychology</title>
  <meta name="description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 R - Basics and Tidyverse | Usefulness of R for Psychology" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 R - Basics and Tidyverse | Usefulness of R for Psychology" />
  
  <meta name="twitter:description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  

<meta name="author" content="FÃ¡bio A. Silva" />


<meta name="date" content="2021-11-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="basic-r.html"/>
<link rel="next" href="exploratory-data-analysis-eda.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="basic-r.html"><a href="basic-r.html"><i class="fa fa-check"></i><b>2</b> Basic R</a></li>
<li class="chapter" data-level="3" data-path="r---basics-and-tidyverse.html"><a href="r---basics-and-tidyverse.html"><i class="fa fa-check"></i><b>3</b> R - Basics and Tidyverse</a>
<ul>
<li class="chapter" data-level="3.1" data-path="r---basics-and-tidyverse.html"><a href="r---basics-and-tidyverse.html#opening-files"><i class="fa fa-check"></i><b>3.1</b> Opening files</a></li>
<li class="chapter" data-level="3.2" data-path="r---basics-and-tidyverse.html"><a href="r---basics-and-tidyverse.html#opening-multiple-files"><i class="fa fa-check"></i><b>3.2</b> Opening multiple files</a></li>
<li class="chapter" data-level="3.3" data-path="r---basics-and-tidyverse.html"><a href="r---basics-and-tidyverse.html#exporting-files"><i class="fa fa-check"></i><b>3.3</b> Exporting files</a></li>
<li class="chapter" data-level="3.4" data-path="r---basics-and-tidyverse.html"><a href="r---basics-and-tidyverse.html#classes-types-and-structures"><i class="fa fa-check"></i><b>3.4</b> Classes, Types and Structures</a></li>
<li class="chapter" data-level="3.5" data-path="r---basics-and-tidyverse.html"><a href="r---basics-and-tidyverse.html#columns"><i class="fa fa-check"></i><b>3.5</b> Columns</a></li>
<li class="chapter" data-level="3.6" data-path="r---basics-and-tidyverse.html"><a href="r---basics-and-tidyverse.html#rows"><i class="fa fa-check"></i><b>3.6</b> Rows</a></li>
<li class="chapter" data-level="3.7" data-path="r---basics-and-tidyverse.html"><a href="r---basics-and-tidyverse.html#filtering"><i class="fa fa-check"></i><b>3.7</b> Filtering</a></li>
<li class="chapter" data-level="3.8" data-path="r---basics-and-tidyverse.html"><a href="r---basics-and-tidyverse.html#arranging"><i class="fa fa-check"></i><b>3.8</b> Arranging</a></li>
<li class="chapter" data-level="3.9" data-path="r---basics-and-tidyverse.html"><a href="r---basics-and-tidyverse.html#selecting"><i class="fa fa-check"></i><b>3.9</b> Selecting</a></li>
<li class="chapter" data-level="3.10" data-path="r---basics-and-tidyverse.html"><a href="r---basics-and-tidyverse.html#mutating"><i class="fa fa-check"></i><b>3.10</b> Mutating</a></li>
<li class="chapter" data-level="3.11" data-path="r---basics-and-tidyverse.html"><a href="r---basics-and-tidyverse.html#grouping-and-summarizing"><i class="fa fa-check"></i><b>3.11</b> Grouping and Summarizing</a></li>
<li class="chapter" data-level="3.12" data-path="r---basics-and-tidyverse.html"><a href="r---basics-and-tidyverse.html#missing-values"><i class="fa fa-check"></i><b>3.12</b> Missing Values</a></li>
<li class="chapter" data-level="3.13" data-path="r---basics-and-tidyverse.html"><a href="r---basics-and-tidyverse.html#counts"><i class="fa fa-check"></i><b>3.13</b> Counts</a></li>
<li class="chapter" data-level="3.14" data-path="r---basics-and-tidyverse.html"><a href="r---basics-and-tidyverse.html#ungrouping"><i class="fa fa-check"></i><b>3.14</b> Ungrouping</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html"><i class="fa fa-check"></i><b>4</b> Exploratory Data Analysis (EDA)</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Usefulness of R for Psychology</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r---basics-and-tidyverse" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> R - Basics and Tidyverse</h1>
<div id="opening-files" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Opening files</h2>
<p><strong>Before opening the data</strong><br />
First, you need to tell R where the files are located. He is lazy that way, and will not look everywhere on your computer for them. So, tell him by using the command <code>setwd()</code>.</p>
<p><strong>Reading the data</strong><br />
So, by now you should have a general idea on how to import data files to R. Here we just remind you how to read some of the most common formats, although R can read just about anything (just google read âfile typeâ in R on google). Be sure to install the <code>xlsx</code> and <code>haven</code> packages to open Excell and SPSS files, respectively. Additionally, there are multiple ways to read the same file. Some will be built in R itself, others will require external packages. This is important to know because some functions, although working, may be outdated or just give you some sort of weird error. Maybe you can overcome this by using a different package.</p>
<p>If you want to import/read an Excel file, just use:<br />
<code>read.xlsx(file = 'example.xlsx', sheetName = 'page_1', header = TRUE)</code><br />
If a text file:<br />
<code>read.delim(file = 'example.txt', header = TRUE, sep = ',', dec = '.')</code><br />
CSV:<br />
<code>read.csv(file = 'example.csv', header = TRUE, sep = ',', dec = '.')</code><br />
SAV (SPSS):<br />
<code>read_sav(file = 'example.sav')</code></p>
<p><strong>Managing your imported data</strong><br />
To have your data in your environment, so that you can mess with it, you should assign your <code>read</code> command to a variable (object). Lets say you do the following <code>df &lt;- read.delim(file = 'example.txt', header = TRUE, sep = ',', dec = '.')</code>. Now, your df object is the dataframe containing that imported data set.</p>
<p><strong>Possible problems</strong><br />
You may encounter several problems. Perhaps one of the most common problems is the something like âthe number of columns is superior to the data.â This probably has to due with R separating columns where it shouldnât or making more columns than it should. You can fix this perhaps by making sure the <code>sep</code> command is specifying the exact separator of the file. It helps to open the file with excel for instance, and double check the separator. Also be sure that you have the decimal symbol is different from the new columns symbol. For instance, sometimes R reads the .csv file (which means comma separated file) and you have commas as decimals. This creates way to many columns that mismatch the number of headers present.<br />
There will surely be more problems, but you can find a way around them by using google.</p>
<p><strong>Checking the data</strong><br />
After youâve opened the data, you should take a peak at it. Thereâs several ways of doing this such as <code>head(df)</code> or some others Iâm not recalling at the moment. Lets see bellow.</p>
</div>
<div id="opening-multiple-files" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Opening multiple files</h2>
<p>Lets say you have a folder, lets assume is named âdata,â and in there you have all your data files (files from each participant). Ideally, to analyze and view the data as a whole, you would want to import all of the data files, and then merge them into a big data file, containing all the participants (identified accordingly).<br />
+
Hereâs a snippet of code that would allow you to do that. Beware though, any file that matches the criteria (in this case â.csvâ files) will be gathered from the folder (your working directory).</p>
<p>Firstly, lets gather the names of the files in our directory that we wanna import.<br />
P.s. Ignore the warning, it just tells you that the directory is only changed for this chunk and then it goes back to normal.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="r---basics-and-tidyverse.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Setting our working directory for this chunk (in this case our data folder)</span></span>
<span id="cb1-2"><a href="r---basics-and-tidyverse.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&#39;data&#39;</span>)</span>
<span id="cb1-3"><a href="r---basics-and-tidyverse.html#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="r---basics-and-tidyverse.html#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Listing all txt files in folder</span></span>
<span id="cb1-5"><a href="r---basics-and-tidyverse.html#cb1-5" aria-hidden="true" tabindex="-1"></a>list_of_files <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb1-6"><a href="r---basics-and-tidyverse.html#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="r---basics-and-tidyverse.html#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Searches for &quot;.csv&quot; files in the folder</span></span>
<span id="cb1-8"><a href="r---basics-and-tidyverse.html#cb1-8" aria-hidden="true" tabindex="-1"></a>list_all_data <span class="ot">&lt;-</span> <span class="fu">dir</span>(<span class="at">pattern=</span><span class="st">&#39;.csv&#39;</span>)</span>
<span id="cb1-9"><a href="r---basics-and-tidyverse.html#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="r---basics-and-tidyverse.html#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co"># For each &quot;.csv&quot; file, append this file to a list that will contain all &quot;.csv&quot; file names.</span></span>
<span id="cb1-11"><a href="r---basics-and-tidyverse.html#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (file <span class="cf">in</span> list_all_data){</span>
<span id="cb1-12"><a href="r---basics-and-tidyverse.html#cb1-12" aria-hidden="true" tabindex="-1"></a>  list_of_files <span class="ot">&lt;-</span> <span class="fu">c</span>(list_of_files, file)</span>
<span id="cb1-13"><a href="r---basics-and-tidyverse.html#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&#39;</span><span class="sc">\n</span><span class="st">File processed:&#39;</span>, file)</span>
<span id="cb1-14"><a href="r---basics-and-tidyverse.html#cb1-14" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## 
## File processed: Participant_1.csv
## File processed: Participant_10.csv
## File processed: Participant_2.csv
## File processed: Participant_3.csv
## File processed: Participant_4.csv
## File processed: Participant_5.csv
## File processed: Participant_6.csv
## File processed: Participant_7.csv
## File processed: Participant_8.csv
## File processed: Participant_9.csv</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="r---basics-and-tidyverse.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Organizing the files</span></span>
<span id="cb3-2"><a href="r---basics-and-tidyverse.html#cb3-2" aria-hidden="true" tabindex="-1"></a>list_of_files <span class="ot">&lt;-</span> <span class="fu">as.character</span>(list_of_files)  <span class="co"># To character</span></span>
<span id="cb3-3"><a href="r---basics-and-tidyverse.html#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co">#list_of_files &lt;- mixedsort(sort(list_of_files))  # Sorting them by name</span></span>
<span id="cb3-4"><a href="r---basics-and-tidyverse.html#cb3-4" aria-hidden="true" tabindex="-1"></a>list_of_files <span class="ot">&lt;-</span> <span class="fu">as.list</span>(list_of_files)  <span class="co"># Transforming it to list</span></span>
<span id="cb3-5"><a href="r---basics-and-tidyverse.html#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="r---basics-and-tidyverse.html#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co"># How many files were processed?</span></span>
<span id="cb3-7"><a href="r---basics-and-tidyverse.html#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&#39;</span><span class="sc">\n</span><span class="st">Total number of files processed:&#39;</span>, <span class="fu">length</span>(<span class="fu">unlist</span>(list_of_files)))</span></code></pre></div>
<pre><code>## 
## Total number of files processed: 10</code></pre>
<p>Then we need to create a function that iterates over all of this file names. It will need to import each file (by their name) and append them to a general dataframe.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="r---basics-and-tidyverse.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Setting the working directory to the data folder for this chunk as well</span></span>
<span id="cb5-2"><a href="r---basics-and-tidyverse.html#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&#39;data&#39;</span>)</span>
<span id="cb5-3"><a href="r---basics-and-tidyverse.html#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="r---basics-and-tidyverse.html#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create our function with &quot;file_name&quot; as input.</span></span>
<span id="cb5-5"><a href="r---basics-and-tidyverse.html#cb5-5" aria-hidden="true" tabindex="-1"></a>import_data <span class="ot">&lt;-</span> <span class="cf">function</span>(file_name){</span>
<span id="cb5-6"><a href="r---basics-and-tidyverse.html#cb5-6" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(file_name, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">encoding =</span> <span class="st">&#39;utf-8&#39;</span>, <span class="at">sep=</span><span class="st">&#39;,&#39;</span>)  <span class="co"># Import one file and name it &quot;df&quot;</span></span>
<span id="cb5-7"><a href="r---basics-and-tidyverse.html#cb5-7" aria-hidden="true" tabindex="-1"></a>  df_part <span class="ot">&lt;&lt;-</span> df  <span class="co"># Make this file available outside the function</span></span>
<span id="cb5-8"><a href="r---basics-and-tidyverse.html#cb5-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-9"><a href="r---basics-and-tidyverse.html#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="r---basics-and-tidyverse.html#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co"># We create an empty dataframe where all individual dataframes will be merged</span></span>
<span id="cb5-11"><a href="r---basics-and-tidyverse.html#cb5-11" aria-hidden="true" tabindex="-1"></a>df_all <span class="ot">&lt;-</span> <span class="fu">data.frame</span>() </span>
<span id="cb5-12"><a href="r---basics-and-tidyverse.html#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="r---basics-and-tidyverse.html#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a index for number of name in list</span></span>
<span id="cb5-14"><a href="r---basics-and-tidyverse.html#cb5-14" aria-hidden="true" tabindex="-1"></a>ind <span class="ot">&lt;-</span> <span class="dv">1</span>  <span class="co"># Begins with file name 1.</span></span>
<span id="cb5-15"><a href="r---basics-and-tidyverse.html#cb5-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-16"><a href="r---basics-and-tidyverse.html#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the function</span></span>
<span id="cb5-17"><a href="r---basics-and-tidyverse.html#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (x <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(list_of_files)){</span>
<span id="cb5-18"><a href="r---basics-and-tidyverse.html#cb5-18" aria-hidden="true" tabindex="-1"></a>  file_name <span class="ot">&lt;-</span> <span class="fu">unlist</span>(list_of_files[ind])  <span class="co"># Select one name from our list</span></span>
<span id="cb5-19"><a href="r---basics-and-tidyverse.html#cb5-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">import_data</span>(file_name) <span class="co"># Run our function </span></span>
<span id="cb5-20"><a href="r---basics-and-tidyverse.html#cb5-20" aria-hidden="true" tabindex="-1"></a>  ind <span class="ot">&lt;-</span> ind <span class="sc">+</span> <span class="dv">1</span>  <span class="co"># Move index of number along.</span></span>
<span id="cb5-21"><a href="r---basics-and-tidyverse.html#cb5-21" aria-hidden="true" tabindex="-1"></a>  df_all <span class="ot">&lt;-</span> <span class="fu">rbind</span>(df_all, df_part)  <span class="co"># Adds the individual dataframe to our &quot;big&quot; dataframe.</span></span>
<span id="cb5-22"><a href="r---basics-and-tidyverse.html#cb5-22" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-23"><a href="r---basics-and-tidyverse.html#cb5-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-24"><a href="r---basics-and-tidyverse.html#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Seeing our dataframe (you can see it all by clicking on it or using &quot;View(df_all)&quot;).</span></span>
<span id="cb5-25"><a href="r---basics-and-tidyverse.html#cb5-25" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_all)</span></code></pre></div>
<pre><code>##   Participant_ID   Condition       RT
## 1              1 Condition_1 1.478651
## 2              1 Condition_1 1.495121
## 3              1 Condition_1 1.506271
## 4              1 Condition_1 1.561987
## 5              1 Condition_1 1.508967
## 6              1 Condition_1 1.512732</code></pre>
</div>
<div id="exporting-files" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Exporting files</h2>
<p>Aside from important, sometimes we also want to export the files we created/modified in R. We can do this with several commands, but perhaps the simpler ones are:<br />
<code>write.table(x = df, file = 'namewewant.txt', sep = ',', dec = '.')</code> - We are export the <code>df</code> dataframe, to a not existing file with a name ânamewewant.txt,â that is separated by commas and has â.â for decimal points. We can also export to an existing data file, and ask for <code>append = TRUE</code>.</p>
<p><code>write.csv(x = df, file = 'namewewant.txt')</code> - Same thing as above, but instead creates a â.csvâ file.</p>
<p>As an example, lets export the dataframe we created in the chunks above.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="r---basics-and-tidyverse.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(<span class="at">x =</span> df_all, <span class="at">file =</span> <span class="st">&#39;some_data.csv&#39;</span>)</span></code></pre></div>
<p>Now, in R you can manage your dataframe as you please. You can do anything. And I truly mean anything. Anything you can do in Excel and then some.</p>
</div>
<div id="classes-types-and-structures" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Classes, Types and Structures</h2>
<p>The data you imported can be in a wide range of classes (types). There are 3 basic types of classes, built-in (different functions can use more), you need to be aware (altough there are more). These are:</p>
<ul>
<li><em>character</em>: strings (words), such as <code>"hello"</code> or <code>"hi123"</code>.<br />
</li>
<li><em>numeric</em>: any type of number, such as <code>2</code>or <code>30.4</code>.<br />
</li>
<li><em>logical</em>: The true or false values. <code>TRUE</code> or <code>FALSE</code>.</li>
</ul>
<p>You can ask R about what type of object it is by using the <code>class(object)</code> command or the <code>typeof(object)</code></p>
<p>R also has different data structures. The ones worth talking about here are:</p>
<ul>
<li><em>atomic vector</em>: Basically every R data structure. A vector could be a character or an numeric object, for instance.</li>
<li><em>lists</em>: a list of objects. Can be created by using <code>list()</code>. You can retrieve the value by using <code>[[]]</code>.</li>
<li><em>matrix</em>: are like tables.</li>
<li><em>data frame</em>: fancy matrices (more common)</li>
<li><em>factor</em>: more of a type of class than anything. This object is a factor with levels.</li>
<li><em>tibble</em>: a special data frame from tidyverse</li>
</ul>
<p><a href="https://swcarpentry.github.io/r-novice-inflammation/13-supp-data-structures/" class="uri">https://swcarpentry.github.io/r-novice-inflammation/13-supp-data-structures/</a></p>
</div>
<div id="columns" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> Columns</h2>
<p>Lets start by some simply manipulations. Lets say you want to change column names. Ideally, I would avoid spaces in the headers (and overall actually) but you do as you please.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="r---basics-and-tidyverse.html#cb8-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> iris  <span class="co"># mtcars is a built-in dataset. Just imagine I&#39;m reading from a file</span></span>
<span id="cb8-2"><a href="r---basics-and-tidyverse.html#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 1</span></span>
<span id="cb8-3"><a href="r---basics-and-tidyverse.html#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;Colname 1&#39;</span>, <span class="st">&#39;Colname 2&#39;</span>, <span class="st">&#39;Colname 3&#39;</span>, <span class="st">&#39;Colname 4&#39;</span>, <span class="st">&#39;Colname 5&#39;</span>)</span>
<span id="cb8-4"><a href="r---basics-and-tidyverse.html#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="r---basics-and-tidyverse.html#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 2</span></span>
<span id="cb8-6"><a href="r---basics-and-tidyverse.html#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;Colname 1&#39;</span>, <span class="st">&#39;Colname 2&#39;</span>, <span class="st">&#39;Colname 3&#39;</span>, <span class="st">&#39;Colname 4&#39;</span>, <span class="st">&#39;Colname 5&#39;</span>)</span>
<span id="cb8-7"><a href="r---basics-and-tidyverse.html#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="r---basics-and-tidyverse.html#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Or just change a specific column name</span></span>
<span id="cb8-9"><a href="r---basics-and-tidyverse.html#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df)[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="st">&#39;Colname 2 - New&#39;</span></span>
<span id="cb8-10"><a href="r---basics-and-tidyverse.html#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="r---basics-and-tidyverse.html#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Finale result</span></span>
<span id="cb8-12"><a href="r---basics-and-tidyverse.html#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span></code></pre></div>
<pre><code>##   Colname 1 Colname 2 - New Colname 3 Colname 4 Colname 5
## 1       5.1             3.5       1.4       0.2    setosa
## 2       4.9             3.0       1.4       0.2    setosa
## 3       4.7             3.2       1.3       0.2    setosa
## 4       4.6             3.1       1.5       0.2    setosa
## 5       5.0             3.6       1.4       0.2    setosa
## 6       5.4             3.9       1.7       0.4    setosa</code></pre>
<p>We can also change the order of the columns.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="r---basics-and-tidyverse.html#cb10-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df[,<span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">5</span>)]</span></code></pre></div>
<p>We can sort by a specific (or multiple columns).</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="r---basics-and-tidyverse.html#cb11-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> iris  <span class="co"># Just restoring the dataframe to be less confusing</span></span>
<span id="cb11-2"><a href="r---basics-and-tidyverse.html#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="r---basics-and-tidyverse.html#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="r---basics-and-tidyverse.html#cb11-4" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df[<span class="fu">order</span>(df[, <span class="dv">1</span>]), ]  <span class="co"># Orders by first column</span></span>
<span id="cb11-5"><a href="r---basics-and-tidyverse.html#cb11-5" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df[<span class="fu">order</span>(<span class="sc">-</span>df[, <span class="dv">1</span>]), ]  <span class="co"># Orders by first column descending</span></span>
<span id="cb11-6"><a href="r---basics-and-tidyverse.html#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="r---basics-and-tidyverse.html#cb11-7" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df[<span class="fu">order</span>(<span class="sc">-</span>df[, <span class="dv">1</span>], df[, <span class="dv">3</span>]), ]  <span class="co"># Orders by first columns descending and then by third column</span></span></code></pre></div>
<p>We can create new columns.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="r---basics-and-tidyverse.html#cb12-1" aria-hidden="true" tabindex="-1"></a>new_data <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">&#39;New Data&#39;</span>, <span class="fu">nrow</span>(df))  <span class="co"># Creating new irrelevant data</span></span>
<span id="cb12-2"><a href="r---basics-and-tidyverse.html#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="r---basics-and-tidyverse.html#cb12-3" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>NewColumn <span class="ot">&lt;-</span> new_data  <span class="co"># Added this data (data must have same length as dataframe!)</span></span>
<span id="cb12-4"><a href="r---basics-and-tidyverse.html#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="r---basics-and-tidyverse.html#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span></code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width   Species NewColumn
## 132          7.9         3.8          6.4         2.0 virginica  New Data
## 136          7.7         3.0          6.1         2.3 virginica  New Data
## 118          7.7         3.8          6.7         2.2 virginica  New Data
## 123          7.7         2.8          6.7         2.0 virginica  New Data
## 119          7.7         2.6          6.9         2.3 virginica  New Data
## 106          7.6         3.0          6.6         2.1 virginica  New Data</code></pre>
<p>How to remove columns.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="r---basics-and-tidyverse.html#cb14-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>Petal.Length <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb14-2"><a href="r---basics-and-tidyverse.html#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb14-3"><a href="r---basics-and-tidyverse.html#cb14-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">within</span>(df, <span class="fu">rm</span>(Sepal.Length))</span></code></pre></div>
<p>We can create and transform the columns.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="r---basics-and-tidyverse.html#cb15-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> iris</span>
<span id="cb15-2"><a href="r---basics-and-tidyverse.html#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="r---basics-and-tidyverse.html#cb15-3" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>Sepal_Area <span class="ot">&lt;-</span> df<span class="sc">$</span>Sepal.Length <span class="sc">*</span> df<span class="sc">$</span>Sepal.Width  <span class="co"># Creating new variable with is the multiplication of the first 2.</span></span>
<span id="cb15-4"><a href="r---basics-and-tidyverse.html#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="r---basics-and-tidyverse.html#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species Sepal_Area
## 1          5.1         3.5          1.4         0.2  setosa      17.85
## 2          4.9         3.0          1.4         0.2  setosa      14.70
## 3          4.7         3.2          1.3         0.2  setosa      15.04
## 4          4.6         3.1          1.5         0.2  setosa      14.26
## 5          5.0         3.6          1.4         0.2  setosa      18.00
## 6          5.4         3.9          1.7         0.4  setosa      21.06</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="r---basics-and-tidyverse.html#cb17-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>Sepal_Area <span class="ot">&lt;-</span> <span class="fu">round</span>(df<span class="sc">$</span>Sepal_Area, <span class="dv">1</span>)  <span class="co"># Transforming existing variable, making it just 1 decimal.</span></span>
<span id="cb17-2"><a href="r---basics-and-tidyverse.html#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="r---basics-and-tidyverse.html#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species Sepal_Area
## 1          5.1         3.5          1.4         0.2  setosa       17.8
## 2          4.9         3.0          1.4         0.2  setosa       14.7
## 3          4.7         3.2          1.3         0.2  setosa       15.0
## 4          4.6         3.1          1.5         0.2  setosa       14.3
## 5          5.0         3.6          1.4         0.2  setosa       18.0
## 6          5.4         3.9          1.7         0.4  setosa       21.1</code></pre>
</div>
<div id="rows" class="section level2" number="3.6">
<h2><span class="header-section-number">3.6</span> Rows</h2>
<p>Altering specific rows is a bit trickier. Nevertheless, this is usually less relevant, since we usually just want to change or apply a condition to an entire column. Having said this, hereâs some relevant commands.</p>
<p>Say you want to alter rows that meet a condition.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="r---basics-and-tidyverse.html#cb19-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>Sepal.Length[df<span class="sc">$</span>Sepal.Length <span class="sc">&lt;=</span> <span class="dv">5</span>] <span class="ot">&lt;-</span> <span class="dv">0</span>  <span class="co"># Any row in the Sepal.Length column less than five will turn to 0</span></span>
<span id="cb19-2"><a href="r---basics-and-tidyverse.html#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="r---basics-and-tidyverse.html#cb19-3" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>Sepal.Length[df<span class="sc">$</span>Sepal.Length <span class="sc">==</span> <span class="fl">7.9</span>] <span class="ot">&lt;-</span> <span class="dv">8</span>  <span class="co"># Changing rows with 7.9 to 8. </span></span></code></pre></div>
<p>How to create a new entry (i.e., row).</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="r---basics-and-tidyverse.html#cb20-1" aria-hidden="true" tabindex="-1"></a>row <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fl">5.6</span>, <span class="fl">3.2</span>, <span class="fl">1.9</span>, <span class="fl">0.1</span>, <span class="st">&#39;new_species&#39;</span>, <span class="dv">10000</span>)  <span class="co"># Create a new row (all columns must be filled)</span></span>
<span id="cb20-2"><a href="r---basics-and-tidyverse.html#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(row) <span class="ot">&lt;-</span> <span class="fu">colnames</span>(df)</span>
<span id="cb20-3"><a href="r---basics-and-tidyverse.html#cb20-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">rbind</span>(df, row)</span>
<span id="cb20-4"><a href="r---basics-and-tidyverse.html#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="r---basics-and-tidyverse.html#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(df)</span></code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width     Species Sepal_Area
## 146          6.7         3.0          5.2         2.3   virginica       20.1
## 147          6.3         2.5          5.0         1.9   virginica       15.8
## 148          6.5         3.0          5.2         2.0   virginica       19.5
## 149          6.2         3.4          5.4         2.3   virginica       21.1
## 150          5.9         3.0          5.1         1.8   virginica       17.7
## 151          5.6         3.2          1.9         0.1 new_species    10000.0</code></pre>
<p>How to delete a row.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="r---basics-and-tidyverse.html#cb22-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">151</span>, <span class="dv">152</span>),]</span></code></pre></div>
</div>
<div id="filtering" class="section level2" number="3.7">
<h2><span class="header-section-number">3.7</span> Filtering</h2>
<p>Tidyverse allows us to do lots of things in a useful and simple way. Lets explore some of its several commands.
More than ever, tidyverse is useful here. Lets load it first.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="r---basics-and-tidyverse.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## -- Attaching packages --------------------------------------- tidyverse 1.3.1 --</code></pre>
<pre><code>## v ggplot2 3.3.5     v purrr   0.3.4
## v tibble  3.1.5     v dplyr   1.0.7
## v tidyr   1.1.4     v stringr 1.4.0
## v readr   2.0.1     v forcats 0.5.1</code></pre>
<pre><code>## -- Conflicts ------------------------------------------ tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<p>Now, lets say we want to <strong>filter</strong> the dataframe.</p>
</div>
<div id="arranging" class="section level2" number="3.8">
<h2><span class="header-section-number">3.8</span> Arranging</h2>
<p>We can <strong>arrange</strong> the dataframe as we wish.
We can sort by just 1 column or more. In the latter case the second, third and so on variables will break the ties.
Missing values are sorted to the end.</p>
</div>
<div id="selecting" class="section level2" number="3.9">
<h2><span class="header-section-number">3.9</span> Selecting</h2>
<p>Another useful trick is to <strong>select</strong> columns.
With this command we can select the columns we want, or do not want.</p>
</div>
<div id="mutating" class="section level2" number="3.10">
<h2><span class="header-section-number">3.10</span> Mutating</h2>
<p>To create new columns, we can also use <strong>mutate</strong>. This a versatile command that allows you to do several things.
Here are a bunch of examples:</p>
</div>
<div id="grouping-and-summarizing" class="section level2" number="3.11">
<h2><span class="header-section-number">3.11</span> Grouping and Summarizing</h2>
<p>We can also create summaries of the data with the command <strong>summarise()</strong>.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="r---basics-and-tidyverse.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species Sepal_Area
## 1          5.1         3.5          1.4         0.2  setosa       17.8
## 2          0.0         3.0          1.4         0.2  setosa       14.7
## 3          0.0         3.2          1.3         0.2  setosa       15.0
## 4          0.0         3.1          1.5         0.2  setosa       14.3
## 5          0.0         3.6          1.4         0.2  setosa       18.0
## 6          5.4         3.9          1.7         0.4  setosa       21.1</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="r---basics-and-tidyverse.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarising mean Sepatl.length by species</span></span>
<span id="cb29-2"><a href="r---basics-and-tidyverse.html#cb29-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb29-3"><a href="r---basics-and-tidyverse.html#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span>  <span class="co"># Grouping by this variable</span></span>
<span id="cb29-4"><a href="r---basics-and-tidyverse.html#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean_By_Species =</span> <span class="fu">mean</span>(Sepal.Length))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   Species    Mean_By_Species
##   &lt;fct&gt;                &lt;dbl&gt;
## 1 setosa                2.34
## 2 versicolor            5.64
## 3 virginica             6.49</code></pre>
<p>You can group by more than one factor and ask for other summaries, such as median, sd, and other basic operations. For instance:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="r---basics-and-tidyverse.html#cb31-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb31-2"><a href="r---basics-and-tidyverse.html#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span> </span>
<span id="cb31-3"><a href="r---basics-and-tidyverse.html#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>())  <span class="co"># Gives you the number of entries in each group</span></span></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   Species    count
##   &lt;fct&gt;      &lt;int&gt;
## 1 setosa        50
## 2 versicolor    50
## 3 virginica     50</code></pre>
<p>You can then build operations on top of your summaries (like mutations or plots)</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="r---basics-and-tidyverse.html#cb33-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb33-2"><a href="r---basics-and-tidyverse.html#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span> </span>
<span id="cb33-3"><a href="r---basics-and-tidyverse.html#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean_Length =</span> <span class="fu">mean</span>(Sepal.Length)) <span class="sc">%&gt;%</span> </span>
<span id="cb33-4"><a href="r---basics-and-tidyverse.html#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(Species, Mean_Length)) <span class="sc">+</span> </span>
<span id="cb33-5"><a href="r---basics-and-tidyverse.html#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-20-1.png" width="672" />
## Changing Format (Wide/Long)
There are two types of ways that the data can be structured in. This ways are important for many reasons, not just for the way they look on the data frame. Certain analysis, commands or functions used in R prefer (or rather mandate) that the data is in a specific format. This format can be either <em>wide</em> or <em>long</em>.<br />
In the wide format each each variable level has a column. Lets say we are looking at how people rate pictures of happy, angry and neutral people in terms of good looks on a rating of 0-10. If we were to have the data in a wide format, we would have a data frame with (aside from columns related to the ID of the participant and so forth) 3 columns. One, labeled âRatings_Happyâ for instance, that would have all the ratings given by each participant to the happy faces, another with the ratings given to the angry faces and another to the neutral faces. It should look something like this:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="r---basics-and-tidyverse.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(faces_df)</span></code></pre></div>
<pre><code>##   Participant_ID Ratings_Happy Ratings_Angry Ratings_Neutral
## 1              1             7             5               5
## 2              2             6             4               8
## 3              3             6             6               7
## 4              4             8             7               8
## 5              5             7             7               5</code></pre>
<p>However, if we were to have the data in long format, we would instead have just have two columns (aside from the Participant ID and other information columns). One column, labeled âFacial_Expressionâ for instance, would have either âHappy,â âAngryâ or âNeutral.â The other column, labeled âRating,â would have the rating given to the face. Since all of the participants rated every condition, each participant would have 3 entries in the dataframe (hence making it longer). It should look something like this:</p>
<p>This is quite simple to do actually. The commands we will be using are <code>pivot_wider</code> and <code>pivot_longer</code> and they are quite intuitive. Lets work through this example. Lets first say we want to transforma data frame from <em>long</em> to <em>wide</em>.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="r---basics-and-tidyverse.html#cb36-1" aria-hidden="true" tabindex="-1"></a>df_long <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Participant_ID =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,<span class="at">each=</span><span class="dv">3</span>),</span>
<span id="cb36-2"><a href="r---basics-and-tidyverse.html#cb36-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Facial_Expression =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&#39;Happy&#39;</span>,<span class="st">&#39;Angry&#39;</span>,<span class="st">&#39;Neutral&#39;</span>), <span class="dv">5</span>),</span>
<span id="cb36-3"><a href="r---basics-and-tidyverse.html#cb36-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Ratings =</span> <span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">6</span>,<span class="dv">4</span>,<span class="dv">7</span>,<span class="dv">6</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">6</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">5</span>))</span>
<span id="cb36-4"><a href="r---basics-and-tidyverse.html#cb36-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-5"><a href="r---basics-and-tidyverse.html#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Transforming</span></span>
<span id="cb36-6"><a href="r---basics-and-tidyverse.html#cb36-6" aria-hidden="true" tabindex="-1"></a>df_wide <span class="ot">&lt;-</span> df_long <span class="sc">%&gt;%</span> </span>
<span id="cb36-7"><a href="r---basics-and-tidyverse.html#cb36-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> Participant_ID,  <span class="co"># Condition that identifies the grouping factor of each entry.</span></span>
<span id="cb36-8"><a href="r---basics-and-tidyverse.html#cb36-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">names_from =</span> Facial_Expression,  <span class="co"># Where to find our future column names</span></span>
<span id="cb36-9"><a href="r---basics-and-tidyverse.html#cb36-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> Ratings)   <span class="co"># Where are the values that will fill those columns </span></span>
<span id="cb36-10"><a href="r---basics-and-tidyverse.html#cb36-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-11"><a href="r---basics-and-tidyverse.html#cb36-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-12"><a href="r---basics-and-tidyverse.html#cb36-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_wide)</span></code></pre></div>
<pre><code>## # A tibble: 5 x 4
##   Participant_ID Happy Angry Neutral
##            &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
## 1              1     6     4       2
## 2              2     6     4       7
## 3              3     6     5       7
## 4              4     5     8       6
## 5              5     5     8       5</code></pre>
<p>Now doing the reverse, that is, turning the data from the current <em>wide</em> format and making it <em>longer</em> again.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="r---basics-and-tidyverse.html#cb38-1" aria-hidden="true" tabindex="-1"></a>df_long <span class="ot">&lt;-</span> df_wide <span class="sc">%&gt;%</span> </span>
<span id="cb38-2"><a href="r---basics-and-tidyverse.html#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">&#39;Happy&#39;</span>,<span class="st">&#39;Angry&#39;</span>,<span class="st">&#39;Neutral&#39;</span>),  <span class="co"># Columns to turn into long</span></span>
<span id="cb38-3"><a href="r---basics-and-tidyverse.html#cb38-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&#39;Facial_Expression&#39;</span>,  <span class="co"># What will the column with the labels be called</span></span>
<span id="cb38-4"><a href="r---basics-and-tidyverse.html#cb38-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&#39;Ratings&#39;</span>)  <span class="co"># What will the column with the values be called</span></span>
<span id="cb38-5"><a href="r---basics-and-tidyverse.html#cb38-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-6"><a href="r---basics-and-tidyverse.html#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_long)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   Participant_ID Facial_Expression Ratings
##            &lt;int&gt; &lt;chr&gt;               &lt;dbl&gt;
## 1              1 Happy                   6
## 2              1 Angry                   4
## 3              1 Neutral                 2
## 4              2 Happy                   6
## 5              2 Angry                   4
## 6              2 Neutral                 7</code></pre>
</div>
<div id="missing-values" class="section level2" number="3.12">
<h2><span class="header-section-number">3.12</span> Missing Values</h2>
<p>We have several ways of dealing with missing values <code>NA</code> (which mean âNot Availableâ by the way).
We can remove then, or omit them, depending on the situation. The important thing to note is that you ask R for certain commands. For instance, if you ask a mean of a column that contains <code>NA</code> the result will be <code>NA</code>. You can either a) specify <code>na.rm = TRUE</code> on the command (if the specific command allows you to do so), or just remove the <code>NA</code> values prior to running the command.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="r---basics-and-tidyverse.html#cb40-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>Sepal.Length <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(df<span class="sc">$</span>Sepal.Length)</span>
<span id="cb40-2"><a href="r---basics-and-tidyverse.html#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Asking a mean with NA values</span></span>
<span id="cb40-3"><a href="r---basics-and-tidyverse.html#cb40-3" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb40-4"><a href="r---basics-and-tidyverse.html#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(Sepal.Length))</span></code></pre></div>
<pre><code>##   Mean
## 1   NA</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="r---basics-and-tidyverse.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Removing NAs when asking the mean</span></span>
<span id="cb42-2"><a href="r---basics-and-tidyverse.html#cb42-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb42-3"><a href="r---basics-and-tidyverse.html#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(Sepal.Length, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>##       Mean
## 1 4.822667</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="r---basics-and-tidyverse.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Removing NAs then asking for the mean</span></span>
<span id="cb44-2"><a href="r---basics-and-tidyverse.html#cb44-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb44-3"><a href="r---basics-and-tidyverse.html#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Sepal.Length)) <span class="sc">%&gt;%</span> </span>
<span id="cb44-4"><a href="r---basics-and-tidyverse.html#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(Sepal.Length))</span></code></pre></div>
<pre><code>##       Mean
## 1 4.822667</code></pre>
</div>
<div id="counts" class="section level2" number="3.13">
<h2><span class="header-section-number">3.13</span> Counts</h2>
<p>Already mentioned above. Gives you the number of entries.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="r---basics-and-tidyverse.html#cb46-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb46-2"><a href="r---basics-and-tidyverse.html#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span> </span>
<span id="cb46-3"><a href="r---basics-and-tidyverse.html#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 4 x 2
##   Species     count
##   &lt;fct&gt;       &lt;int&gt;
## 1 setosa         50
## 2 versicolor     50
## 3 virginica      50
## 4 new_species     1</code></pre>
</div>
<div id="ungrouping" class="section level2" number="3.14">
<h2><span class="header-section-number">3.14</span> Ungrouping</h2>
<p>Lastly, you can use <code>ungroup()</code> in a pipe to ungroup whay youâve did.</p>
<p>See tidyverse book page 107 for Exploratory Data Analysis</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="basic-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="exploratory-data-analysis-eda.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/02-Chapter2.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
